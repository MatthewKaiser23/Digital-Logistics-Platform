"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{19435:function(e,n,t){t.d(n,{u:function(){return u}});var o=t(85893),i=t(11355),l=t(69737),a=t(67294),r=t(30112),s=t(16494),d=function(e){var n=e.text;return(0,o.jsx)("div",{className:"flex items-center z-100 justify-center fixed inset-0 bg-black bg-opacity-80 backdrop-blur-2xs",children:(0,o.jsx)(s.Z,{text:null!==n&&void 0!==n?n:"Loading...",className:"text-body-lg text-white"})})},c=t(33303),u=function(e){var n=e.children,t=e.title,s=e.Button,u=e.open,v=e.setOpen,m=e.isLoading,g=e.loaderText,f=e.contentClassName,h=e.fixedHeight,p=void 0===h||h,x=e.footerHasMarginTop,b=void 0===x||x,y=e.hasCustomBody,j=void 0!==y&&y;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(i.u.Root,{show:u,as:a.Fragment,children:(0,o.jsxs)(l.V,{as:"div",className:"fixed z-100 md:inset-0 w-full md:w-auto overflow-hidden bottom-0",onClose:function(){return v(!1)},children:[m&&(0,o.jsx)(d,{text:g}),(0,o.jsxs)("div",{className:"flex items-end justify-center min-h-screen text-center md:block",children:[(0,o.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,o.jsx)(l.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,o.jsx)("span",{className:"hidden md:inline-block md:align-middle md:h-screen","aria-hidden":"true",children:"\u200b"}),(0,o.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,o.jsxs)("div",{className:"inline-block align-middle w-full md:w-auto bg-white rounded-t-lg md:rounded-lg md:my-8 text-left overflow-hidden shadow-xl transform transition-all",children:[t&&(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 md:py-5 md:px-6 border-b border-gray-200",children:[(0,o.jsx)(l.V.Title,{className:"font-bold text-gray-900",children:t}),(0,o.jsx)("button",{type:"button",className:"bg-white rounded-md text-gray-600 transition-all hover:text-gray-400",onClick:function(){return v(!1)},children:(0,o.jsx)(r.Z,{icon:"XSolidIcon",className:"h-6 w-6","aria-hidden":"true"})})]}),j?n:(0,o.jsx)("div",{className:(0,c.AK)("p-4 lg:p-6 flex flex-col gap-5",f,p?"overflow-y-auto max-h-[80vh]":"block h-auto"),children:n}),s&&(0,o.jsx)("div",{className:(0,c.AK)("flex justify-end p-4 lg:p-6 border-t border-gray-200",b&&"mt-4"),children:s})]})})]})]})})})}},88575:function(e,n,t){t.d(n,{Z:function(){return r}});var o=t(85893),i=t(67294),l=t(6235),a=t(33303);function r(e){var n=e.className,t=e.placeholder,r=e.initialValue,s=e.value,d=e.onChange,c=e.onEditorChange,u=e.error,v=e.onDirty,m=e.contentClassName,g=void 0===m?"rich-text-block":m,f=e.toolbar,h=e.quickbars_insert_toolbar,p=e.toolbar_groups,x=e.cssFileUrl,b=void 0===x?"/wysiwyg.css":x,y=e.style,j=e.quickbars_selection_toolbar,w=e.quickbars_image_toolbar,Z=e.inline,N=void 0!==Z&&Z,k=e.onExecCommand,_=(0,i.useState)(!1),C=_[0],S=_[1],F=(0,i.useState)(!1),A=F[0],E=F[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:(0,a.AK)("border rounded-md wysiwyg-editor",n,u?"border-red-500":"border-gray-300",C&&"!z-auto"),children:(0,o.jsx)(l.M,{apiKey:"po5d6mkhdxrvtes5nnhbhhzb4qfqcnzem7r0ksc6b4ga5wrn",initialValue:r,value:s,onBlur:function(e,n){d&&d(n.getBody().innerHTML)},onDirty:v,onMouseEnter:function(){return E(!0)},onEditorChange:function(e){A&&"function"===typeof c&&c(e)},onExecCommand:function(e){"mceFullScreen"===e.command&&S((function(e){return!e})),"function"===typeof k&&k(e)},onBeforeExecCommand:function(e,n){if("mceToggleFormat"===e.command)for(var t=n.formatter.matchAll(["p-large","p-small","p-normal"]),o=0;o<t.length;o++)n.formatter.remove(t[o])},init:{inline:N,placeholder:t,whitespace_elements:"p pre script noscript style textarea video audio iframe object code",formats:{"p-large":{block:"p",classes:"large"},"p-normal":{block:"p",classes:"normal"},"p-small":{block:"p",classes:"small"},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,block_expand:!0,expand:!1,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},remove_linebreaks:!1,entity_encoding:"raw",max_height:"100vh",toolbar_mode:"floating",menubar:!1,toolbar_sticky:!0,toolbar_sticky_offset:200,statusbar:!1,branding:!1,body_class:g,style_formats:[{title:"Heading 1",block:"h1"},{title:"Heading 2",block:"h2"},{title:"Heading 3",block:"h3"},{title:"Large Text",format:"p-large"},{title:"Normal Text",format:"p-normal"},{title:"Small Text",format:"p-small"},{title:"Normal Text",block:"p",selector:""}],style_formats_autohide:!0,quickbars_selection_toolbar:null!==j&&void 0!==j?j:"styleselect bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | forecolor backcolor | blockquote",quickbars_insert_toolbar:null!==h&&void 0!==h&&h,quickbars_image_toolbar:null!==w&&void 0!==w&&w,object_resizing:!1,contextmenu:!1,content_css:b,content_style:y,mobile:{toolbar_mode:"floating"},toolbar_groups:null!==p&&void 0!==p?p:{formatting:{icon:"format",tooltip:"Formatting",items:"styleselect bold italic underline strikethrough | superscript subscript"},color:{icon:"color-picker",tooltip:"Color",items:"forecolor backcolor"},align:{icon:"align-left",tooltip:"Aligment",items:"alignleft aligncenter alignright alignjustify"},list:{icon:"unordered-list",tooltip:"Lists",items:"bullist numlist | outdent indent"},add:{icon:"plus",tooltip:"Add",items:"table hr emoticons"}},toolbar:null!==f&&void 0!==f?f:"undo redo | formatting  color  align list add | fullscreen | removeformat",external_plugins:{durable:"/plugins/durable/plugin.min.js"}},plugins:["advlist autoresize autolink lists link charmap anchor quickbars visualblocks code fullscreen table paste code hr emoticons preview"]})}),u?(0,o.jsx)("p",{className:"mt-2 text-sm text-red-600",children:u}):""]})}},63944:function(e,n,t){t.d(n,{Q5:function(){return r},Wt:function(){return d},ZU:function(){return c},ld:function(){return s}});var o=t(47568),i=t(70655),l=function(){return sessionStorage.getItem("idBusiness")},a=function(e){var n,t=sessionStorage.getItem("user");return t&&null!==(n=JSON.parse(t)[e])&&void 0!==n?n:null},r=function(){var e=(0,o.Z)((function(e){var n,t,o=arguments;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return o.length>1&&void 0!==o[1]&&o[1],n="scheduleData",[4,e("/sms/get-existing-schedule-data",{businessID:l()})];case 1:return(t=i.sent()).status?(localStorage.setItem(n,JSON.stringify(t.content)),[2,t.content]):[2,null]}}))}));return function(n){return e.apply(this,arguments)}}(),s=function(){var e=(0,o.Z)((function(e,n,t,o,r,s,d){var c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e("/sms/add-blog-schedule",{businessID:l(),userEmail:a("email"),isBlogPostEnabled:n,selectedSchedule:t,isNotificationEnabled:o,phoneNumber:r,countryCode:s,existingScheduleID:d})];case 1:return[2,null===(c=i.sent())||void 0===c?void 0:c.status]}}))}));return function(n,t,o,i,l,a,r){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.Z)((function(e,n){var t;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return[4,e("/sms/verify-business-phone-number",{businessID:l(),verificationCode:n,email:a("email"),location:a("location")})];case 1:return[2,null===(t=o.sent())||void 0===t?void 0:t.verificationStatus]}}))}));return function(n,t){return e.apply(this,arguments)}}(),c=function(){var e=(0,o.Z)((function(e,n,t){var o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e("/sms/resend-otp-code",{businessID:l(),countryCode:n,phoneNumber:t})];case 1:return[2,null===(o=i.sent())||void 0===o?void 0:o.isCodeResent]}}))}));return function(n,t,o){return e.apply(this,arguments)}}()},61135:function(e,n,t){t.d(n,{Z:function(){return u}});var o=t(47568),i=t(70655),l=t(85893),a=t(67294),r=t(16494),s=t(30112),d=t(33303),c=t(65082);function u(e){var n=e.queryText,t=e.regenerate,u=e.onChange,v=e.autoSuggest,m=(0,a.useState)((0,d.tl)("business.config")),g=m[0],f=m[1],h=(0,a.useState)(!1),p=h[0],x=h[1],b=(0,a.useState)([]),y=b[0],j=b[1],w=(0,a.useState)(""),Z=w[0],N=w[1],k=(0,c.Z)(),_=k.get,C=k.post,S=function(){var e=(0,o.Z)((function(){var e;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return x(!0),[4,_("/business/get-config")];case 1:return(e=n.sent())&&!0===e.status&&e.content&&((0,d.Fs)("business.config",e.content),f(e.content)),x(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,o.Z)((function(e){var n,t,o,l,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return x(!0),[4,C("/media/search-unsplash",{query:e,page:1})];case 1:return o=i.sent(),l=(null===o||void 0===o||null===(n=o.content)||void 0===n||null===(t=n.response)||void 0===t?void 0:t.results)||[],a=l.map((function(e){var n,t;return{id:e.id,url:e.urls.regular,preview:e.urls.regular,author:null===(n=e.user)||void 0===n?void 0:n.first_name,authorLink:e.user.links.html+"?utm_source=Durable.co&utm_medium=referral",type:"unsplash",download:null===(t=e.links)||void 0===t?void 0:t.download_location}})),N(e),j(a),x(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),A=function(){var e=(0,o.Z)((function(e){var n;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return x(!0),[4,C("/media/create",{picture:e})];case 1:return(n=t.sent())&&!0===n.status&&n.content?u(n.content):d.Z9.error(n.message),x(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.Z)((function(){var e,t;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:return e=n||function(){var e,n,t,o,i,l,a,r,s,d;return(null===g||void 0===g||null===(e=g.business)||void 0===e||null===(n=e.type)||void 0===n?void 0:n.Type)&&"Other"!==(null===g||void 0===g||null===(t=g.business)||void 0===t||null===(o=t.type)||void 0===o||null===(i=o.Type)||void 0===i?void 0:i.name)?null===g||void 0===g||null===(l=g.business)||void 0===l||null===(a=l.type)||void 0===a||null===(r=a.Type)||void 0===r?void 0:r.queryTerm:null===g||void 0===g||null===(s=g.business)||void 0===s||null===(d=s.type)||void 0===d?void 0:d.name}(),y.length>0&&e===Z?(t=(0,d.kd)(y),[4,A(t)]):[3,2];case 1:return o.sent(),[2];case 2:return F(e),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){if(y.length>0){var e=(0,d.kd)(y);A(e)}}),[y]),(0,a.useEffect)((function(){g||S()}),[]),(0,a.useEffect)((function(){v&&E()}),[v]),(0,l.jsx)("div",{className:"text-right mt-2",children:(0,l.jsx)("button",{disabled:p,onClick:E,className:"link inline-flex items-center gap-1",children:p?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-sm",children:t?"Regenerating":"Generating"}),(0,l.jsx)(r.Z,{variant:"icon"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-sm",children:t?"Regenerate":"Generate"}),(0,l.jsx)(s.Z,{icon:"BoltIcon",className:"w-4 h-4"})]})})})}},1172:function(e,n,t){t.d(n,{Z:function(){return N}});var o=t(47568),i=t(26042),l=t(69396),a=t(70655),r=t(85893),s=t(10253),d=t(80360),c=t(67294),u=t(51121),v=t(83441),m=function(e){return e.replace("+1","").replace(/^(\d{3})(\d{3})(\d{4})$/,"($1) $2-$3")},g=function(e){var n=e.label,t=e.informationProvidedCallback,o=e.showPrefix,i=void 0===o||o,l=e.existingInformation,a=[{id:"us",name:"+1",icon:(0,r.jsx)(v.Z,{countryCode:"US","aria-label":"United States",svg:!0})},{id:"ca",name:"+1",icon:(0,r.jsx)(v.Z,{countryCode:"CA","aria-label":"Canada",svg:!0})}],g=(0,s.Z)(c.useState(""),2),f=g[0],h=g[1],p=(0,s.Z)(c.useState(a[0]),2),x=p[0],b=p[1];return(0,c.useEffect)((function(){l&&h(l.notFormatted)}),[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.Z,{label:n,value:f,prefix:i&&(0,r.jsx)(d.Z,{className:"w-full",values:a,value:x,icon:x.icon,showOptionIcon:!0,onChange:b,buttonBorder:!1}),addPrefixPadding:!1,onChange:function(e){if(!(e.length>15)){var n=e.replace(/\D/g,"");n.length<=3?h(n):n.length<=6?h("(".concat(n.substring(0,3),") ").concat(n.substring(3))):n.length<=10&&h("(".concat(n.substring(0,3),") ").concat(n.substring(3,6),"-").concat(n.substring(6)));var o=n.trim().replace(/[\s\(\)-]+/g,"");t({notFormatted:m(o),formatted:"".concat(x.name).concat(o),isNumberValid:10===o.length})}}})})},f=t(19435),h=t(52077),p=t(43490),x=t(58386),b=t(16494),y=t(33303),j=t(63944),w=t(65082),Z=function(e){var n=e.children,t=e.isModalOpen,o=e.setIsModalOpen;return(0,r.jsx)(f.u,{open:t,fixedHeight:!0,hasCustomBody:!0,children:(0,r.jsxs)("div",{className:"flex flex-col text-center md:max-w-sm",children:[(0,r.jsx)("img",{src:"https://cdn.durable.co/assets/auto-post/auto-post-on-modal-header.svg",alt:"Auto-post on modal header image.",className:"h-40 md:w-96"}),(0,r.jsxs)("div",{className:"flex flex-col gap-8 p-8",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("p",{className:"text-gray-900 text-xl font-semibold leading-6",children:"You\u2019re all set up for auto-post!"}),(0,r.jsx)("p",{className:"text-gray-900 text-base font-normal leading-6",children:n})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"py-3.5 px-4 border-1 border-gray-300 rounded-md",onClick:function(){return o(!1)},children:"Close"})})]})]})})},N=function(e){var n=e.showModal,t=e.showModalHandler,s=e.scheduleData,u=e.setScheduleData,v=null===s||void 0===s?void 0:s.existingScheduleData,N=(0,c.useState)(!0),k=N[0],_=N[1],C=(0,c.useState)(!0),S=C[0],F=C[1],A=(0,c.useState)(!0),E=A[0],I=A[1],P=(0,c.useState)({notFormatted:"",formatted:"",isNumberValid:!1}),D=P[0],T=P[1],B=(0,c.useState)(""),V=B[0],O=B[1],R=(0,c.useState)(!0),L=R[0],q=R[1],X=(0,c.useState)(!1),Y=X[0],M=X[1],z=(0,c.useState)(!1),H=z[0],K=z[1],J=(0,c.useState)({id:"",name:""}),W=J[0],U=J[1],$=(0,c.useState)(!1),G=$[0],Q=$[1],ee=(0,c.useState)(!1),ne=ee[0],te=ee[1],oe="DISABLED",ie=(0,c.useState)({phoneNumber:null,isEnabled:null,isNotificationEnabled:null,name:null}),le=ie[0],ae=ie[1],re=(0,w.Z)(),se=re.post,de=re.get,ce=function(e){var n,t,o,i,l,a,r,d=null!==(o=null===e||void 0===e?void 0:e.existingScheduleData)&&void 0!==o?o:v,c=(null===d||void 0===d?void 0:d.name)&&(null===d||void 0===d?void 0:d.name)!==oe?null===d||void 0===d?void 0:d.name:null;ae({phoneNumber:null!==(i=null===d||void 0===d||null===(n=d.BusinessPhoneNumber)||void 0===n?void 0:n.phoneNumber)&&void 0!==i?i:"",isEnabled:null===(l=null===d||void 0===d?void 0:d.isEnabled)||void 0===l||l,isNotificationEnabled:null===(a=null===d||void 0===d?void 0:d.isNotificationEnabled)||void 0===a||a,name:null!==c&&void 0!==c?c:ue()[0].id});var u,g,f=null!==(r=null===d||void 0===d?void 0:d.BusinessPhoneNumber)&&void 0!==r?r:{phoneNumber:"",verified:!0},h=f.phoneNumber,p=f.verified;U(c?{id:c,name:null===(t=null===s||void 0===s?void 0:s.schedules[c])||void 0===t?void 0:t.displayText}:ue()[0]),_(null===(u=null===d||void 0===d?void 0:d.isEnabled)||void 0===u||u),F(null===(g=null===d||void 0===d?void 0:d.isNotificationEnabled)||void 0===g||g),T(h?{notFormatted:h?m(h):"",formatted:h||"",isNumberValid:!0}:{notFormatted:"",formatted:"",isNumberValid:!1}),I(p),O(""),q(!0),M(!1),K(!1),Q(!1)},ue=function(){return(null===s||void 0===s?void 0:s.schedules)?Object.values(null===s||void 0===s?void 0:s.schedules).map((function(e){return{id:e.name,name:e.displayText}})):{schedules:[],selectedSchedule:{}}},ve=function(){var e=(0,o.Z)((function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,j.Q5)(de,!0)];case 1:return e=n.sent(),u(e),ce(e),[2]}}))}));return function(){return e.apply(this,arguments)}}(),me=function(e){T(e)},ge=function(){var e=(0,o.Z)((function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,j.ld)(se,k,W.id,S,D.formatted,null===s||void 0===s?void 0:s.countryCode,null!==(e=null===v||void 0===v?void 0:v._id)&&void 0!==e?e:null)];case 1:return[2,n.sent()]}}))}));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,o.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return M(!0),[4,(0,j.Wt)(se,V)];case 1:switch(e.sent()){case"VERIFIED":return[3,2];case"EXPIRED":return[3,4]}return[3,5];case 2:return t(!1),te(!0),[4,ve()];case 3:return e.sent(),[3,6];case 4:return y.Z9.error("OTP verification code expired. Please request a new code.",{autoClose:!0}),[3,6];case 5:return y.Z9.error("OTP verification failed.",{autoClose:!0}),[3,6];case 6:return M(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),he=function(){var e=(0,o.Z)((function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return!k||!S||D.formatted&&D.isNumberValid?(K(!0),[4,ge()]):(y.Z9.error("Please enter a valid phone number.",{autoClose:!0}),[2]);case 1:return"FAILED"===(e=n.sent())?(K(!1),y.Z9.error("Failed to save schedule.",{autoClose:!0}),[2]):[4,ve()];case 2:return n.sent(),Q(!1),"NEEDS_VERIFICATION"!==e?(t(!1),k?te(!0):y.Z9.success(k?"Auto-post on":"Auto-post off",{autoClose:!0})):I(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),pe=function(){var e;v&&(null===v||void 0===v||null===(e=v.BusinessPhoneNumber)||void 0===e?void 0:e.verified)?(T({notFormatted:"",formatted:"",isNumberValid:!1}),K(!1),I(!0)):(ce(),t(!1))},xe=function(){F(!S),T({notFormatted:"",formatted:"",isNumberValid:!1})},be=function(){var e=(0,o.Z)((function(){var e,n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return e=null===s||void 0===s?void 0:s.countryCode,n=D.formatted,e&&n?[4,(0,j.ZU)(se,e,n)]:(y.Z9.error("Unable to request a new code right now, please try again later",{autoClose:!0}),[2]);case 1:return t.sent()?(O(""),y.Z9.success("OTP code sent.",{autoClose:!0}),[2]):(y.Z9.error("Failed to resend OTP code. Please try again later.",{autoClose:!0}),[2])}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){6===V.length&&q(!1)}),[V]),(0,c.useEffect)((function(){ce()}),[]),(0,c.useEffect)((function(){Q(le.phoneNumber!==D.formatted&&D.isNumberValid||le.isEnabled!==k||le.isNotificationEnabled!==S||le.name!==W.id)}),[W,k,S,D,Q,le]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.u,{title:E?"Automate posts":null,Button:E&&(0,r.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,r.jsx)(h.Z,{onClick:t,disabled:H,className:"secondary",children:"Cancel"}),(0,r.jsx)("button",{onClick:he,className:"relative primary w-full",disabled:!G||H,children:H?(0,r.jsx)(b.Z,{text:""}):"Save"})]}),open:n,setOpen:function(){ce(),t(!1)},fixedHeight:!1,footerHasMarginTop:k,children:E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsx)("p",{children:"Draft blog posts automatically using AI"}),(0,r.jsx)("span",{className:"flex-grow"}),(0,r.jsx)(p.Z,{enabled:k,onChange:_})]})}),k&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("hr",{className:"mt-1 mb-1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"h6 font-semibold text-gray-900 mb-3",children:"Schedule"}),(0,r.jsx)(d.Z,{className:"w-full mb-2",values:ue(),value:W,onChange:U}),(0,r.jsx)("p",{className:"label font-normal text-gray-500",children:(null===v||void 0===v?void 0:v.isEnabled)&&(null===v||void 0===v?void 0:v.name)!==oe?"Ongoing":"Starting today"})]}),(0,r.jsx)("hr",{className:"mt-1 mb-1"}),(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"h6 font-semibold text-gray-900 mb-1",children:"Notifications"}),(0,r.jsx)("p",{className:"label font-normal text-gray-500 mb-6",children:"Send a text message when drafts are ready"})]}),(0,r.jsx)("span",{className:"flex-grow"}),(0,r.jsx)(p.Z,{enabled:S,onChange:xe})]}),S&&(0,r.jsx)(g,{label:"Phone",informationProvidedCallback:me,showPrefix:!1,existingInformation:D})]})]})]}):(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex flex-col text-center gap-8",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"h6",children:"Please verify your phone number"}),(0,r.jsx)("p",{className:"h6",children:"by entering the 6 digit code sent to"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"text-sm pl-1 pr-1 pt-2 pb-2 rounded-md bg-gray-100",children:D.notFormatted})}),(0,r.jsx)("p",{className:"label font-normal text-gray-500",children:"You'll only have to do this once."})]}),(0,r.jsx)("div",{children:(0,r.jsx)(x.Z,{value:V,onChange:O,numInputs:6,renderInput:function(e){return(0,r.jsx)("input",(0,l.Z)((0,i.Z)({},e),{className:""}))},inputStyle:{width:"2.69rem",height:"2.5rem"},containerStyle:{display:"flex",gap:"0.5rem"},shouldAutoFocus:!0})}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("button",{onClick:fe,className:"relative primary w-full",disabled:Y||L,children:Y?(0,r.jsx)(b.Z,{text:""}):"Verify"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(h.Z,{onClick:pe,loading:!1,disabled:!1,className:"light",children:"Cancel"}),(0,r.jsx)("span",{className:"flex-grow"}),(0,r.jsx)(h.Z,{onClick:be,loading:!1,disabled:!1,className:"light",children:"Resend code"})]})]})]})})}),(0,r.jsx)(Z,{isModalOpen:ne,setIsModalOpen:te,children:S?"We've sent a confirmation text message, and you\u2019ll get another one when your first post is ready for review.":"You'll see new draft posts appear on the schedule you chose."})]})}},29064:function(e,n,t){t.d(n,{Dn:function(){return k},IP:function(){return y},Xd:function(){return _},dF:function(){return b},hA:function(){return Z},qk:function(){return N}});var o=t(26042),i=t(69396),l=t(85893),a=t(80360),r=t(75131),s=t(33303),d=t(42341),c=t(61135),u=t(77160),v=t(51121),m=t(67294),g=t(30112),f=t(43490),h=[{id:"color",name:"Color"},{id:"image",name:"Image"},{id:"gradient",name:"Gradient"}],p=[{id:"top-down",value:"180deg",icon:"ArrowDownIcon"},{id:"left-right",value:"90deg",icon:"ArrowRightIcon"},{id:"bottom-left-top-right",value:"45deg",icon:"ArrowUpRightIcon"},{id:"bottom-right-top-left",value:"315deg",icon:"ArrowUpLeftIcon"}],x=null;function b(e){switch(null===e||void 0===e?void 0:e.type){case"color":case"gradient":return null===e||void 0===e?void 0:e.color;case"image":var n,t,o;return(null===e||void 0===e||null===(n=e.overlay)||void 0===n||null===(t=n.color)||void 0===t?void 0:t.includes("rgba"))?(0,s.jg)(e.overlay.color):null===e||void 0===e||null===(o=e.overlay)||void 0===o?void 0:o.color;default:return e}}function y(e){switch(null===e||void 0===e?void 0:e.type){case"color":return{backgroundColor:e.color};case"gradient":var n,t,o;return{backgroundImage:"linear-gradient(".concat(null!==(n=e.direction)&&void 0!==n?n:p[0].value,", ").concat(null!==(t=e.color)&&void 0!==t?t:"#FFFFFF",", ").concat(null!==(o=e.color2)&&void 0!==o?o:"#D1D5DB",")")};case"image":var i,l;return{backgroundImage:"url(".concat((null===(i=e.image)||void 0===i?void 0:i.preview)||(null===(l=e.image)||void 0===l?void 0:l.url)||e.image,")"),backgroundPosition:"".concat(e.imagePositionX||"center"," ").concat(e.imagePositionY||"center"),backgroundSize:"cover"};default:return{backgroundColor:e}}}var j=function(e){var n,t,a,r,g,h,p,b,y=e.background,j=e.setBackground,w=(0,m.useState)({x:(null===y||void 0===y||null===(n=y.imagePositionX)||void 0===n?void 0:n.replace("%",""))||50,y:(null===y||void 0===y||null===(t=y.imagePositionY)||void 0===t?void 0:t.replace("%",""))||50}),Z=w[0],N=w[1],k=(0,m.useState)(!1),_=k[0],C=k[1],S=(0,m.useState)(!1),F=S[0],A=S[1];return(0,m.useEffect)((function(){var e;C(!((null===y||void 0===y||null===(e=y.image)||void 0===e?void 0:e._id)||(null===y||void 0===y?void 0:y.image)))}),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Image"}),(0,l.jsx)(c.Z,{className:"!text-sm",regenerate:!!(null===y||void 0===y?void 0:y.image),onChange:function(e){j((0,i.Z)((0,o.Z)({},y),{image:e})),A(!0),setTimeout((function(){A(!1)}),1e3)},autoSuggest:_})]}),(0,l.jsx)(u.Z,{itemClassName:"!max-w-none",limit:1,location:"covers",pictures:null!==(b=null===y||void 0===y?void 0:y.image)&&void 0!==b?b:null,onChange:function(e){return j((0,i.Z)((0,o.Z)({},y),{image:e&&e.length>0&&e[0]}))},reload:F,shutterstock:!0,unsplash:!0,upload:!0,library:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-semibold",children:"Image position"}),(0,l.jsxs)("div",{className:"flex items-center gap-4 mt-4",children:[(0,l.jsx)("p",{className:"text-gray-600 text-sm w-1/5",children:"Horizontal"}),(0,l.jsx)(v.Z,{className:"flex-1",type:"range",min:0,max:100,step:5,value:Z.x,onChange:function(e){N((0,i.Z)((0,o.Z)({},Z),{x:e})),clearTimeout(x),x=setTimeout((function(){j((0,i.Z)((0,o.Z)({},y),{imagePositionX:"".concat(e,"%")})),N((0,i.Z)((0,o.Z)({},Z),{x:e}))}),500,e)}})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 mt-4",children:[(0,l.jsx)("p",{className:"text-gray-600 text-sm w-1/5",children:"Vertical"}),(0,l.jsx)(v.Z,{className:"flex-1",type:"range",min:0,max:100,step:5,value:Z.y,onChange:function(e){N((0,i.Z)((0,o.Z)({},Z),{y:e})),clearTimeout(x),x=setTimeout((function(){j((0,i.Z)((0,o.Z)({},y),{imagePositionY:"".concat(e,"%")})),N((0,i.Z)((0,o.Z)({},Z),{y:e}))}),500,e)}})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3 mt-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-1 font-semibold",children:"Background overlay"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Add a background overlay to make the text easier to read"})]}),(0,l.jsx)(f.Z,{enabled:void 0!==(null===y||void 0===y?void 0:y.overlay),onChange:function(e){return j(e?(0,i.Z)((0,o.Z)({},y),{overlay:{color:"#000000",amount:50}}):(0,i.Z)((0,o.Z)({},y),{overlay:void 0}))}})]}),(null===y||void 0===y?void 0:y.overlay)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Z,{inline:!0,className:"mt-4",color:((null===y||void 0===y||null===(a=y.overlay)||void 0===a?void 0:a.color.includes("rgba"))?(0,s.jg)(null===y||void 0===y||null===(r=y.overlay)||void 0===r?void 0:r.color):null===y||void 0===y||null===(g=y.overlay)||void 0===g?void 0:g.color)||"#000000",onChange:function(e){return j((0,i.Z)((0,o.Z)({},y),{overlay:(0,i.Z)((0,o.Z)({},y.overlay),{color:e.hex})}))}}),(0,l.jsxs)("div",{className:"flex items-center gap-3 mt-7",children:[(0,l.jsx)("label",{children:"Amount"}),(0,l.jsx)(v.Z,{className:"w-full",type:"range",min:0,max:100,value:null===y||void 0===y||null===(h=y.overlay)||void 0===h?void 0:h.amount,onChange:function(e){var n,t,l;return j((0,i.Z)((0,o.Z)({},y),{overlay:(0,i.Z)((0,o.Z)({},y.overlay),{amount:e,color:(null===y||void 0===y||null===(n=y.overlay)||void 0===n?void 0:n.color.includes("rgba"))?(0,s.jg)(null===y||void 0===y||null===(t=y.overlay)||void 0===t?void 0:t.color):null===y||void 0===y||null===(l=y.overlay)||void 0===l?void 0:l.color})}))}}),(0,l.jsxs)("label",{children:[null===y||void 0===y||null===(p=y.overlay)||void 0===p?void 0:p.amount,"%"]})]})]})]})]})},w=function(e){var n=e.background,t=e.setBackground;return(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Direction"}),(0,l.jsx)(r.E,{className:"flex items-center",value:n.direction||p[0].value,onChange:function(e){return t((0,i.Z)((0,o.Z)({},n),{direction:e}))},children:p.map((function(e,n){var t=e.id,o=e.value,i=e.icon;return(0,l.jsx)(r.E.Option,{value:o,children:function(e){var t=e.checked;return(0,l.jsx)("div",{className:(0,s.AK)(t?"bg-indigo-700 border-indigo-700 text-white":"border-gray-300 text-gray-500","p-2.5 border cursor-pointer transition-all",0===n?"rounded-l-lg":n===p.length-1?"rounded-r-lg":"border-t border-b"),children:(0,l.jsx)(g.Z,{icon:i,className:"w-5 h-5"})})}},t)}))})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"text-label font-normal text-gray-700",children:"First color"}),(0,l.jsx)(d.Z,{inline:!0,color:n.color,onChange:function(e){return t((0,i.Z)((0,o.Z)({},n),{color:e.hex}))}})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"text-label font-normal text-gray-700",children:"Second color"}),(0,l.jsx)(d.Z,{inline:!0,color:n.color2,onChange:function(e){return t((0,i.Z)((0,o.Z)({},n),{color2:e.hex}))}})]})]})},Z=function(e){var n,t,o,i,a,r=e.background,d=(null===r||void 0===r||null===(n=r.overlay)||void 0===n?void 0:n.color.includes("rgba"))?(0,s.jg)(null===r||void 0===r||null===(t=r.overlay)||void 0===t?void 0:t.color):null===r||void 0===r||null===(o=r.overlay)||void 0===o?void 0:o.color;return"image"===(null===r||void 0===r?void 0:r.type)&&r.overlay?(0,l.jsx)("div",{className:(0,s.AK)("w-full h-full absolute top-0 left-0 transition-all duration-300"),style:{backgroundColor:(0,s.mR)(null!==d&&void 0!==d?d:"#000000",null!==(a=null===r||void 0===r||null===(i=r.overlay)||void 0===i?void 0:i.amount)&&void 0!==a?a:50)}}):null},N=function(e){var n,t,r,c=e.background,u=e.setBackground,v=e.defaults,m=e.className,g=e.title,f=e.disabledOptions,p=void 0===f?[]:f;return p=p.filter((function(e){return e!==(null===c||void 0===c?void 0:c.type)})),(0,l.jsxs)("div",{className:(0,s.AK)(m,"space-y-6"),children:[(0,l.jsx)("p",{className:"font-semibold",children:null!==g&&void 0!==g?g:"Background"}),p.length!==h.length-1&&(0,l.jsx)(a.Z,{placeholder:"Select",values:h.filter((function(e){return!(null===p||void 0===p?void 0:p.includes(e.id))})),value:(null===c||void 0===c?void 0:c.type)&&h.find((function(e){return e.id===(null===c||void 0===c?void 0:c.type)})),onChange:function(e){return u({type:e.id,color:"gradient"===e.id?null!==(n=null===v||void 0===v?void 0:v.primaryColor)&&void 0!==n?n:"#FFFFFF":"color"===e.id?null!==(t=null===v||void 0===v?void 0:v.default)&&void 0!==t?t:"#FFFFFF":void 0,color2:"gradient"===e.id?null!==(r=null===v||void 0===v?void 0:v.secondaryColor)&&void 0!==r?r:"#D1D5DB":void 0,overlay:"image"===e.id?{color:"#000000",amount:50}:void 0})}}),"color"===(null===c||void 0===c?void 0:c.type)&&(0,l.jsx)(d.Z,{inline:!0,color:null===c||void 0===c?void 0:c.color,onChange:function(e){return u((0,i.Z)((0,o.Z)({},c),{color:e.hex}))}}),"image"===(null===c||void 0===c?void 0:c.type)&&(0,l.jsx)(j,{background:c,setBackground:u}),"gradient"===(null===c||void 0===c?void 0:c.type)&&(0,l.jsx)(w,{background:c,setBackground:u})]})},k=function(e){var n,t,o,i,l,a,r,s;return"image"===(null===(n=e.background)||void 0===n?void 0:n.type)?{enabled:!0,media:null===(t=e.background)||void 0===t?void 0:t.image,positionX:(null===(o=e.background)||void 0===o?void 0:o.imagePositionX)||"50%",positionY:(null===(i=e.background)||void 0===i?void 0:i.imagePositionY)||"50%",opacity:isNaN(null===(l=e.background)||void 0===l||null===(a=l.overlay)||void 0===a?void 0:a.amount)?50:null===(r=e.background)||void 0===r||null===(s=r.overlay)||void 0===s?void 0:s.amount}:{enabled:!1}},_=function(e){var n,t,a,r,d,g,h,p,b,y,j,w,Z,N,_,C,S,F,A,E,I,P,D=e.block,T=e.setBlock,B=e.className,V=(0,m.useState)(!1),O=V[0],R=V[1],L=(0,m.useState)({x:(null===D||void 0===D||null===(n=D.layers)||void 0===n||null===(t=n.image)||void 0===t||null===(a=t.positionX)||void 0===a?void 0:a.replace("%",""))||50,y:(null===D||void 0===D||null===(r=D.layers)||void 0===r||null===(d=r.image)||void 0===d||null===(g=d.positionY)||void 0===g?void 0:g.replace("%",""))||50}),q=L[0],X=L[1];return(0,m.useEffect)((function(){var e;if(!(null===D||void 0===D||null===(e=D.layers)||void 0===e?void 0:e.image)){var n,t,l=k(D);if(l.enabled)X({x:null===(n=l.positionX)||void 0===n?void 0:n.replace("%",""),y:null===(t=l.positionY)||void 0===t?void 0:t.replace("%","")});T((function(e){return(0,i.Z)((0,o.Z)({},e),{layers:(0,i.Z)((0,o.Z)({},e.layers),{image:l})})}))}}),[D]),(0,l.jsxs)("div",{className:(0,s.AK)("",B),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Background image"}),(0,l.jsx)(f.Z,{enabled:null!==(I=null===D||void 0===D||null===(h=D.layers)||void 0===h||null===(p=h.image)||void 0===p?void 0:p.enabled)&&void 0!==I&&I,onChange:function(e){return T((function(n){return(0,i.Z)((0,o.Z)({},n),{layers:(0,i.Z)((0,o.Z)({},n.layers),{image:(0,i.Z)((0,o.Z)({},n.layers.image),{enabled:e})})})}))}})]}),(null===D||void 0===D||null===(b=D.layers)||void 0===b||null===(y=b.image)||void 0===y?void 0:y.enabled)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,l.jsx)("p",{className:"font-medium",children:"Image"}),(0,l.jsx)(c.Z,{className:"!text-sm",regenerate:!!(null===D||void 0===D||null===(j=D.layers)||void 0===j||null===(w=j.image)||void 0===w?void 0:w.media),onChange:function(e){T((function(n){return(0,i.Z)((0,o.Z)({},n),{layers:(0,i.Z)((0,o.Z)({},n.layers),{image:(0,i.Z)((0,o.Z)({},n.layers.image),{media:e})})})})),R(!0),setTimeout((function(){R(!1)}),1e3)}})]}),(0,l.jsx)(u.Z,{itemClassName:"!max-w-none !h-54 !rounded-none",limit:1,location:"covers",pictures:null!==(P=null===D||void 0===D||null===(Z=D.layers)||void 0===Z||null===(N=Z.image)||void 0===N?void 0:N.media)&&void 0!==P?P:null,onChange:function(e){return T((function(n){return(0,i.Z)((0,o.Z)({},n),{layers:(0,i.Z)((0,o.Z)({},n.layers),{image:(0,i.Z)((0,o.Z)({},n.layers.image),{media:e&&e.length>0&&e[0]})})})}))},reload:O,shutterstock:!0,unsplash:!0,upload:!0,library:!0})]}),(0,l.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,l.jsx)("p",{className:"font-medium",children:"Position"}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("p",{className:"text-gray-600 text-sm w-1/5",children:"Horizontal"}),(0,l.jsx)(v.Z,{className:"flex-1",type:"range",min:0,max:100,step:5,value:q.x,onChange:function(e){X((0,i.Z)((0,o.Z)({},q),{x:e})),clearTimeout(x),x=setTimeout((function(){T((function(n){return(0,i.Z)((0,o.Z)({},n),{layers:(0,i.Z)((0,o.Z)({},n.layers),{image:(0,i.Z)((0,o.Z)({},n.layers.image),{positionX:"".concat(e,"%")})})})})),X((0,i.Z)((0,o.Z)({},q),{x:e}))}),500,e)}})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("p",{className:"text-gray-600 text-sm w-1/5",children:"Vertical"}),(0,l.jsx)(v.Z,{className:"flex-1",type:"range",min:0,max:100,step:5,value:q.y,onChange:function(e){X((0,i.Z)((0,o.Z)({},q),{y:e})),clearTimeout(x),x=setTimeout((function(){T((function(n){return(0,i.Z)((0,o.Z)({},n),{layers:(0,i.Z)((0,o.Z)({},n.layers),{image:(0,i.Z)((0,o.Z)({},n.layers.image),{positionY:"".concat(e,"%")})})})})),X((0,i.Z)((0,o.Z)({},q),{y:e}))}),500,e)}})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("p",{className:"font-medium",children:"Color overlay"}),(0,l.jsx)(v.Z,{className:"flex-1",type:"range",min:0,max:100,value:null===D||void 0===D||null===(_=D.layers)||void 0===_||null===(C=_.image)||void 0===C?void 0:C.opacity,onChange:function(e){return T((function(n){return(0,i.Z)((0,o.Z)({},n),{layers:(0,i.Z)((0,o.Z)({},n.layers),{image:(0,i.Z)((0,o.Z)({},n.layers.image),{opacity:e})})})}))}}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:[isNaN(null===D||void 0===D||null===(S=D.layers)||void 0===S||null===(F=S.image)||void 0===F?void 0:F.opacity)?50:null===D||void 0===D||null===(A=D.layers)||void 0===A||null===(E=A.image)||void 0===E?void 0:E.opacity,"%"]})]})]})]})}},3434:function(e,n,t){t.d(n,{Z:function(){return k},c:function(){return N}});var o=t(47568),i=t(26042),l=t(69396),a=t(99534),r=t(29815),s=t(70655),d=t(85893),c=t(30120),u=t(33303),v=t(67294),m=t(25675),g=t.n(m),f=t(30112),h=t(16494),p=t(65082),x=t(52077),b=t(88575),y=t(33299),j=t(29064),w=t(34122),Z=[];function N(e){var n=(null===e||void 0===e?void 0:e.banner)||{},t=n.opacity,o=n.color,r=n.color2,s=n.type,d=(0,a.Z)(n,["opacity","color","color2","type"]);return"image"===s?(0,i.Z)({image:e.Image,overlay:{color:null!==o&&void 0!==o?o:"#000000",amount:null!==t&&void 0!==t?t:50},type:s},d):"color"===s?(0,l.Z)((0,i.Z)({},d),{color:null!==o&&void 0!==o?o:"#F3F4F6",type:s}):(0,l.Z)((0,i.Z)({},d),{color:null!==o&&void 0!==o?o:"#F3F4F6",color2:null!==r&&void 0!==r?r:"#FFFFFF",type:s})}function k(e){var n,t,a,m,k,_,C,S,F,A,E=e.website,I=e.style,P=e.post,D=e.postBackground,T=e.onSettingsPost,B=e.onExit,V=(0,v.useState)(!1),O=V[0],R=V[1],L=(0,v.useState)(P),q=L[0],X=L[1],Y=(0,v.useState)(P),M=Y[0],z=Y[1],H=(0,v.useState)(!1),K=H[0],J=H[1],W=(0,v.useState)(N(q)),U=W[0],$=W[1],G=(0,v.useState)((0,u.$O)((0,j.dF)(U))),Q=G[0],ee=G[1],ne=(0,y.useSession)().data,te=(0,p.Z)(),oe=te.post,ie=te.stream,le=(0,v.useRef)(null),ae=function(){var e=(0,o.Z)((function(e){var n,t,o;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return R(!0),n=(0,i.Z)({},q),q._id&&(n=(0,l.Z)((0,i.Z)({},n),{Author:null===(t=q.Author)||void 0===t?void 0:t._id})),[4,oe(q._id?"/website/edit-post":"/website/create-post",n)];case 1:return!0===(null===(o=a.sent())||void 0===o?void 0:o.status)&&(null===o||void 0===o?void 0:o.content)&&(u.Z9.success("Post saved!"),z(q),J(!1),q._id||X((0,l.Z)((0,i.Z)({},q),{_id:o.content._id,slug:o.content.slug,Author:o.content.Author})),e&&B()),R(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=(0,o.Z)((function(){var e,n,t,o;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return R(!0),(n=(0,l.Z)((0,i.Z)({},q),{Author:null===(e=q.Author)||void 0===e?void 0:e._id,published:!0})).publishedAt||(n.publishedAt=c.ou.now().toJSDate()),[4,oe("/website/edit-post",n)];case 1:return!0===(null===(t=a.sent())||void 0===t?void 0:t.status)&&(null===t||void 0===t?void 0:t.content)&&(u.Z9.success("Post published!"),X((0,l.Z)((0,i.Z)({},q),{published:!0,publishedAt:c.ou.fromISO(null===t||void 0===t||null===(o=t.content)||void 0===o?void 0:o.publishedAt).toJSDate()}))),R(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),se=function(){var e=(0,o.Z)((function(){var e,n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return Z=[],R(!0),J(!0),X((function(e){var n,t;return(0,l.Z)((0,i.Z)({},e),{content:"",banner:{type:"color",color:(null===E||void 0===E?void 0:E.primaryColor)||"#000000"},published:!1,publishedAt:null,createdAt:c.ou.now().toJSDate(),status:"generating",imagesToSave:[],Author:e.Author||{firstName:null===ne||void 0===ne||null===(n=ne.user)||void 0===n?void 0:n.name,picture:null===ne||void 0===ne||null===(t=ne.user)||void 0===t?void 0:t.image}})})),(null===q||void 0===q?void 0:q.title)&&""!==(null===q||void 0===q?void 0:q.title)?[4,ce(q.title)]:[3,2];case 1:return(e=t.sent()).length>0&&(n=(0,u.kd)(e),X((function(e){return(0,l.Z)((0,i.Z)({},e),{Image:n,banner:(0,l.Z)((0,i.Z)({},e.banner),{type:"image",opacity:50}),imagesToSave:[]})}))),ie("/ai/generate",{prompt:"create-post",data:{subject:q.title}},(function(e){Z.push(e)})).catch((function(e){u.Z9.error(e.message),X((function(e){return(0,l.Z)((0,i.Z)({},e),{content:"",status:"error"})})),R(!1)})),de(),[3,3];case 2:X((function(e){return(0,l.Z)((0,i.Z)({},e),{title:"New post",status:null})})),R(!1),J(!1),t.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,o.Z)((function(){var e,n,t,o,a,r,d,c,v,m,g,f,h,p,x,b,y,j;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:le.current=document.getElementById("end-of-content"),e=[],n="",t=!0,s.label=1;case 1:return t?0!==Z.length?[3,3]:[4,(0,u._v)(100)]:[3,15];case 2:return s.sent(),[3,1];case 3:return"[DONE]"!==(o=Z.shift())?[3,4]:(R(!1),X((function(e){return(0,l.Z)((0,i.Z)({},e),{status:null})})),n="",Z=[],e=[],t=!1,le.current=document.getElementById("main-preview"),(null===le||void 0===le?void 0:le.current)&&(le.current.style.scrollBehavior="smooth",le.current.scrollTop=0),[3,14]);case 4:a=(n+=o).substring(n.length-100,n.length),r=a.matchAll(/<image:(.+)?\/>/gi),d=!0,c=!1,v=void 0,s.label=5;case 5:s.trys.push([5,10,11,12]),m=r[Symbol.iterator](),s.label=6;case 6:return(d=(g=m.next()).done)?[3,9]:(f=g.value,(h=f[1]).includes("image:")&&(h=h.replace("image:","")),p='<div class="w-full aspect-w-16 aspect-h-9 bg-gray-100 animate-pulse"></div>',n=n.replace(f[0],p),X((function(e){return(0,l.Z)((0,i.Z)({},e),{content:n})})),(null===le||void 0===le?void 0:le.current)&&le.current.scrollIntoView({behavior:"auto",block:"end"}),[4,ce(h)]);case 7:(x=s.sent()).length>0?(b=Math.random().toString(36).substring(3)+Date.now().toString(36),y=(0,u.kd)(x),n=n.replace(p,'<figure id="figure-'.concat(b,'"><img id="').concat(b,'" src="').concat(y.url,'" alt="').concat(h,'" class="object-cover bg-gray-100" style="aspect-ratio: 16/9"></figure>')),e.push(y)):n=n.replace(p,""),s.label=8;case 8:return d=!0,[3,6];case 9:return[3,12];case 10:return j=s.sent(),c=!0,v=j,[3,12];case 11:try{d||null==m.return||m.return()}finally{if(c)throw v}return[7];case 12:return X((function(t){return(0,l.Z)((0,i.Z)({},t),{content:n,imagesToSave:e})})),(null===le||void 0===le?void 0:le.current)&&le.current.scrollIntoView({behavior:"auto",block:"end"}),[4,(0,u._v)(5)];case 13:s.sent(),s.label=14;case 14:return[3,1];case 15:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,o.Z)((function(e){var n,t,o,i,l;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return n=[],[4,oe("/media/search-unsplash",{query:e,page:1})];case 1:return(t=a.sent())&&t.status&&t.content&&t.content.response&&t.content.response.results&&(o=n).push.apply(o,(0,r.Z)(null===(i=t.content.response)||void 0===i||null===(l=i.results)||void 0===l?void 0:l.map((function(e){var n,t;return{id:e.id,url:e.urls.regular,author:null===(n=e.user)||void 0===n?void 0:n.first_name,authorLink:e.user.links.html+"?utm_source=Durable.co&utm_medium=referral",type:"unsplash",download:null===(t=e.links)||void 0===t?void 0:t.download_location}})))),[2,n]}}))}));return function(n){return e.apply(this,arguments)}}(),ue=function(){K?window.parent.dirtyPost():B()},ve=function(e){return new RegExp('<s*figure[^>]*id="figure-'.concat(e,'"(.*?)>(.*?)</figure>'),"gi")},me=function(e){var n=e.detail;(null===n||void 0===n?void 0:n.id)&&(X((function(e){return(0,l.Z)((0,i.Z)({},e),{content:e.content.replace(ve(n.id),"")})})),J(!0))},ge=function(e){var n=e.detail;if(null===n||void 0===n?void 0:n.id){var t=["object-cover","bg-gray-100"];t.push((0,w.yW)(n.cornerRadius,null===E||void 0===E?void 0:E.cornerRadius));var o=n.positionX&&"null"!==n.positionX&&""!==n.positionX?n.positionX:"center",a=n.positionY&&"null"!==n.positionY&&""!==n.positionY?n.positionY:"center",r=n.caption?'<figcaption class="body-normal text-gray-500 mt-2">'.concat(n.caption,"</figcaption>"):"",s='<figure id="figure-'.concat(n.id,'">')+'<img id="'.concat(n.id,'" ').concat(n.src?'src="'.concat(n.src,'"'):"",' alt="').concat(n.alt,'" class="').concat(t.join(" "),'" ')+'style="aspect-ratio: '.concat(n.aspectRatio.replace(":","/"),"; object-position: ").concat(o," ").concat(a,';" ')+'data-corners="'.concat(n.cornerRadius,'" data-aspect="').concat(n.aspectRatio,'" data-caption="').concat(n.caption,'" ')+'data-positionX="'.concat(n.positionX,'" data-positionY="').concat(n.positionY,'"/>')+"".concat(r,"</figure>");X((function(e){return(0,l.Z)((0,i.Z)({},e),{content:e.content.replace(ve(n.id),s)})})),K||K===n.dirty||J(!0),le.current=document.getElementById(n.id),le.current&&le.current.scrollIntoView({behavior:"smooth",block:"center"})}},fe=function(e){var n=e.detail;if(null===n||void 0===n?void 0:n.id){var t=["w-full","bg-gray-100"];n.src||t.push("h-80"),t.push((0,w.yW)(n.cornerRadius,null===E||void 0===E?void 0:E.cornerRadius));var o='<figure id="figure-'.concat(n.id,'"><iframe id="').concat(n.id,'" ').concat(n.src?'src="'.concat(n.src,'"'):"",' class="').concat(t.join(" "),'" ')+'style="aspect-ratio: 16/9" allow="autoplay; encrypted-media" allowFullScreen="" '+'data-url="'.concat(n.url,'" data-corners="').concat(n.cornerRadius,'"></iframe></figure>');X((function(e){return(0,l.Z)((0,i.Z)({},e),{content:e.content.replace(ve(n.id),o)})})),K||K===n.dirty||J(!0),le.current=document.getElementById(n.id),le.current&&le.current.scrollIntoView({behavior:"smooth",block:"center"})}},he=function(){if(null===q||void 0===q?void 0:q._id){var e=(0,u.p$)(M);X((0,l.Z)((0,i.Z)({},e),{publishedAt:e.publishedAt?c.ou.fromISO(e.publishedAt).toJSDate():null,createdAt:c.ou.fromISO(e.createdAt).toJSDate()}))}else X((function(e){return(0,l.Z)((0,i.Z)({},e),{content:""})}));J(!1)},pe=function(e){var n=e.detail;(null===n||void 0===n?void 0:n._id)&&X((0,l.Z)((0,i.Z)({},n),{publishedAt:n.publishedAt?c.ou.fromISO(n.publishedAt).toJSDate():null,createdAt:c.ou.fromISO(n.createdAt).toJSDate()}))},xe=function(){return(0,d.jsx)("button",{className:"flex-shrink-0 secondary !font-sans",disabled:O,onClick:he,children:"Discard"})},be=function(e){var n=e.className;return(0,d.jsx)(x.Z,{className:(0,u.AK)("flex-shrink-0 primary !font-sans",n),disabled:!K,loading:O,onClick:function(){return ae()},children:"Save"})},ye=function(e){var n=e.className;return(0,d.jsxs)("button",{className:(0,u.AK)("flex-shrink-0 light icon !font-sans",n),disabled:O,onClick:ue,children:[(0,d.jsx)(f.Z,{icon:"ChevronLeftIcon",className:"w-5 h-5"}),(0,d.jsx)("span",{className:"hidden sm:inline-block",children:"Blog"})]})};return(0,v.useEffect)((function(){P&&X(P)}),[P]),(0,v.useEffect)((function(){if(q){"new"===q.status&&se();var e=N(q);$(e),ee((0,u.$O)((0,j.dF)(e)))}return window.parent.addEventListener("website-builder-discard-post",he),function(){window.parent.removeEventListener("website-builder-discard-post",he)}}),[q]),(0,v.useEffect)((function(){return window.parent.addEventListener("website-builder-post-saved",pe),window.parent.addEventListener("website-builder-regenerate-post",se),window.parent.addEventListener("website-builder-post-image-changed",ge),window.parent.addEventListener("website-builder-post-image-remove",me),window.parent.addEventListener("website-builder-post-video-changed",fe),function(){window.parent.addEventListener("website-builder-post-saved",pe),window.parent.removeEventListener("website-builder-regenerate-post",se),window.parent.removeEventListener("website-builder-post-image-changed",ge),window.parent.removeEventListener("website-builder-post-image-remove",me),window.parent.removeEventListener("website-builder-post-video-changed",fe)}}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"fixed top-0 inset-x-0 grid grid-cols-3 items-center justify-between gap-3 p-2 md:p-3 md:px-6 bg-white border-b md:border-0 shadow",style:{zIndex:99999},children:[(0,d.jsx)("div",{className:"md:hidden",children:!K||(null===q||void 0===q?void 0:q.status)&&"ready"!==(null===q||void 0===q?void 0:q.status)?(0,d.jsx)(ye,{className:"transparent"}):(0,d.jsx)(xe,{})}),(0,d.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[!K||(null===q||void 0===q?void 0:q.status)&&"ready"!==(null===q||void 0===q?void 0:q.status)?(0,d.jsx)(ye,{className:"gap-2 !pr-3 !py-2"}):(0,d.jsx)(xe,{}),(0,d.jsx)(be,{})]}),(0,d.jsx)("div",{className:"",children:(0,d.jsx)("p",{className:"w-full max-w-40 md:max-w-80 mx-auto leading-5 whitespace-nowrap overflow-hidden overflow-ellipsis",children:null===q||void 0===q?void 0:q.title})}),(0,d.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[!K&&!(null===q||void 0===q?void 0:q.published)&&(null===q||void 0===q?void 0:q._id)&&(0,d.jsx)(x.Z,{className:"primary !font-sans",loading:O,onClick:function(){return re()},children:"Publish"}),K&&"generating"!==(null===q||void 0===q?void 0:q.status)&&(0,d.jsx)(be,{className:"md:!hidden"}),"generating"===(null===q||void 0===q?void 0:q.status)&&(0,d.jsxs)("button",{className:"primary gap-2",disabled:!0,children:[(0,d.jsx)(h.Z,{variant:"icon"}),(0,d.jsx)("span",{className:"hidden md:block font-sans",children:"Generating"})]})]})]}),(0,d.jsxs)("section",{className:"relative flex items-center justify-center overflow-hidden min-h-120 flex-none break-word",style:(0,j.IP)(U),children:[(0,d.jsx)(j.hA,{background:U}),(0,d.jsx)("div",{className:"absolute top-0 left-0 right-0 z-50 flex items-center justify-end p-6 lg:p-8",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["New post"!==q.title&&(0,d.jsx)("button",{className:"inline-flex items-center gap-2 px-4 py-3 lg:py-2 text-white bg-black bg-opacity-50 rounded-md hover:bg-opacity-100 disabled:opacity-40 disabled:bg-opacity-100 disabled:cursor-not-allowed",disabled:O,onClick:function(){window.parent.regeneratePost(q)},children:"generating"===(null===q||void 0===q?void 0:q.status)?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"hidden lg:inline-block text-sm leading-4 font-medium font-sans",children:"Generating"}),(0,d.jsx)(h.Z,{variant:"icon"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"hidden lg:inline-block text-sm leading-4 font-medium font-sans",children:"Regenerate"}),(0,d.jsx)(f.Z,{icon:"BoltIcon",className:"w-4 h-4"})]})}),(0,d.jsxs)("button",{className:"inline-flex items-center gap-2 px-4 py-3 lg:py-2 text-white bg-black bg-opacity-50 rounded-md hover:bg-opacity-100 disabled:opacity-40 disabled:bg-opacity-100 disabled:cursor-not-allowed",disabled:O,onClick:function(){return T(q)},children:[(0,d.jsx)("span",{className:"text-sm leading-4 font-medium font-sans",children:"Settings"}),(0,d.jsx)(f.Z,{icon:"Cog8ToothIcon",className:"w-4 h-4"})]})]})}),(0,d.jsx)("div",{className:"relative container mx-auto px-5 md:px-6 z-10 py-12 lg:py-32 xl:py-40",children:(0,d.jsxs)("div",{className:"flex flex-col items-center max-w-4xl mx-auto",children:[(0,d.jsx)("h1",{className:"text-xlarge text-h1 xl:text-7xl xl:leading-tight mb-4 text-center",style:(0,i.Z)({color:Q},(0,u.j2)(E)),children:null===q||void 0===q?void 0:q.title}),(0,d.jsxs)("div",{className:"flex flex-col lg:flex-row gap-2 items-center lg:justify-center body-large",style:(0,i.Z)({color:Q},(0,u.SV)(E)),children:[(0,d.jsx)("span",{children:c.ou.fromJSDate((null===q||void 0===q?void 0:q.publishedAt)||(null===q||void 0===q?void 0:q.createdAt)).toFormat("LLL dd, yyyy")}),(null===q||void 0===q||null===(n=q.Author)||void 0===n?void 0:n.firstName)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"hidden lg:inline-block",children:"\xb7"}),(0,d.jsxs)("span",{children:["By ",null===q||void 0===q||null===(t=q.Author)||void 0===t?void 0:t.firstName," ",(null===q||void 0===q||null===(a=q.Author)||void 0===a?void 0:a.lastName)||""]})]})]}),(0,d.jsx)("div",{className:"flex items-center justify-center h-8 w-8 lg:h-10 lg:w-10 rounded-full overflow-hidden mt-3",children:(null===q||void 0===q||null===(m=q.Author)||void 0===m?void 0:m.picture)?(0,d.jsx)(g(),{src:(null===q||void 0===q||null===(k=q.Author)||void 0===k||null===(_=k.picture)||void 0===_?void 0:_.url)||(null===q||void 0===q||null===(C=q.Author)||void 0===C?void 0:C.picture),alt:null===q||void 0===q||null===(S=q.Author)||void 0===S?void 0:S.firstName,width:"64",height:"64",objectFit:"cover",className:"rounded-full overflow-hidden bg-white"}):(0,d.jsx)("div",{className:"flex justify-center items-center w-full h-full bg-gray-500",children:(0,u.Qm)(null===q||void 0===q||null===(F=q.Author)||void 0===F?void 0:F.name)?(0,d.jsx)("p",{className:"text-white text-lg uppercase bg-gray-500",children:(0,u.Qm)(null===q||void 0===q||null===(A=q.Author)||void 0===A?void 0:A.name)}):(0,d.jsx)(f.Z,{icon:"UserIcon",className:"w-5 h-5 text-white"})})})]})})]}),(0,d.jsxs)("section",{className:"relative z-10",style:I||{backgroundColor:"#FFFFFF"},children:[(0,d.jsx)(j.hA,{background:D}),(0,d.jsx)("div",{className:"container mx-auto px-5 md:px-6 py-14 xl:py-28 relative z-10",children:(0,d.jsx)("div",{className:"max-w-3xl mx-auto",children:"generating"===(null===q||void 0===q?void 0:q.status)?(0,d.jsx)("div",{className:"rich-text-block website-wysiwyg max-w-xl mx-auto pointer-events-none",dangerouslySetInnerHTML:{__html:null===q||void 0===q?void 0:q.content}}):(0,d.jsx)(b.Z,{inline:!0,className:"website-wysiwyg rich-text-block max-w-xl mx-auto !border-none !rounded-none placeholder-current",placeholder:"Write your blog post here...",initialValue:null===q||void 0===q?void 0:q.content,quickbars_selection_toolbar:"bold italic | link h2 h3 blockquote",quickbars_insert_toolbar:"durable-insert-image durable-insert-video table",quickbars_image_toolbar:!1,toolbar:!1,onDirty:function(e){return J(e)},onChange:function(e){return X((0,l.Z)((0,i.Z)({},q),{content:e.trim()}))},onExecCommand:function(e){if("durableAddImage"===e.command)window.parent.selectedPostImage={id:e.value,fullWidth:!1,aspectRatio:"16:9",cornerRadius:"default",caption:"",alt:""},window.parent.dispatchEvent(new CustomEvent("openManagePostImage")),le.current=document.getElementById(e.value),le.current&&le.current.scrollIntoView({behavior:"smooth",block:"center"});else if("durableEditImage"===e.command){var n=e.value,t=n.getAttribute("data-aspect")||"16:9",o=n.getAttribute("data-corners")||"default",i=n.getAttribute("data-caption")||"",l=n.getAttribute("data-positionX"),a=n.getAttribute("data-positionY"),r={id:n.id,src:n.src,fullWidth:!1,aspectRatio:t,cornerRadius:o,caption:i,positionX:l,positionY:a,alt:n.alt};n.src&&(r.media={_id:n.id,id:n.id,url:n.src}),window.parent.selectedPostImage=r,window.parent.dispatchEvent(new CustomEvent("openManagePostImage")),le.current=e.value,le.current.scrollIntoView({behavior:"smooth",block:"center"})}else if("durableAddVideo"===e.command)window.parent.selectedPostVideo={id:e.value,fullWidth:!1,cornerRadius:"default"},window.parent.dispatchEvent(new CustomEvent("openManagePostVideo")),le.current=document.getElementById(e.value),le.current&&le.current.scrollIntoView({behavior:"smooth",block:"center"});else if("durableEditVideo"===e.command){var s=e.value.children[0],d=s.getAttribute("data-corners")||"default",c=s.getAttribute("data-url")||"";window.parent.selectedPostVideo={id:s.id,src:s.src,url:c,fullWidth:!1,cornerRadius:d},window.parent.dispatchEvent(new CustomEvent("openManagePostVideo")),le.current=e.value,le.current.scrollIntoView({behavior:"smooth",block:"center"})}},style:"\n                                    .mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before {\n                                        color: ".concat((null===I||void 0===I?void 0:I.color)||"#000000",";\n                                    }\n                                ")})})}),(0,d.jsx)("div",{id:"end-of-content",className:(0,u.AK)("generating"===(null===q||void 0===q?void 0:q.status)&&"py-10","absolute"),style:{backgroundColor:"transparent",bottom:"-40px"}})]}),(0,d.jsx)("div",{className:"hidden rounded-sm md:rounded-md lg:rounded-lg rounded-lg md:rounded-xl lg:rounded-2xl rounded-2xl md:rounded-3xl lg:rounded-4xl"})]})}}}]);