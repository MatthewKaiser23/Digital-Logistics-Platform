(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3721],{22741:function(e,t,s){"use strict";var a=s(53328),n=s(30120);const r={datetime:n.ou.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:n.ou.TIME_WITH_SECONDS,minute:n.ou.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};a.IQ._date.override({_id:"luxon",_create:function(e){return n.ou.fromMillis(e,this.options)},formats:function(){return r},parse:function(e,t){const s=this.options;if(null===e||"undefined"===typeof e)return null;const a=typeof e;return"number"===a?e=this._create(e):"string"===a?e="string"===typeof t?n.ou.fromFormat(e,t,s):n.ou.fromISO(e,s):e instanceof Date?e=n.ou.fromJSDate(e,s):"object"!==a||e instanceof n.ou||(e=n.ou.fromObject(e)),e.isValid?e.valueOf():null},format:function(e,t){const s=this._create(e);return"string"===typeof t?s.toFormat(t,this.options):s.toLocaleString(t)},add:function(e,t,s){const a={};return a[s]=t,this._create(e).plus(a).valueOf()},diff:function(e,t,s){return this._create(e).diff(this._create(t)).as(s).valueOf()},startOf:function(e,t,s){if("isoWeek"===t){s=Math.trunc(Math.min(Math.max(0,s),6));const t=this._create(e);return t.minus({days:(t.weekday-s+7)%7}).startOf("day").valueOf()}return t?this._create(e).startOf(t).valueOf():e},endOf:function(e,t){return this._create(e).endOf(t).valueOf()}})},73488:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/website/analytics",function(){return s(17553)}])},17553:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(47568),n=s(10253),r=s(51351),l=s(70655),o=s(85893),i=s(30120),d=s(67294),c=s(30112),u=s(16494),x=s(80360),m=s(65082),g=s(33303),f=s(41664),h=s.n(f),p=s(31877),b=(s(22741),s(86067)),y=s(11163),v=[{id:0,name:"Today",start:i.ou.now().startOf("day").toISO(),end:i.ou.now().endOf("day").toISO()},{id:1,name:"Yesterday",start:i.ou.now().startOf("day").minus({days:1}).toISO(),end:i.ou.now().minus({days:1}).endOf("day").toISO()},{id:2,name:"Last 2 days",start:i.ou.now().endOf("day").minus({days:2}).toISO(),end:i.ou.now().endOf("day").toISO()},{id:3,name:"Last 7 days",start:i.ou.now().endOf("day").minus({days:7}).toISO(),end:i.ou.now().endOf("day").toISO()},{id:4,name:"Last 15 days",start:i.ou.now().endOf("day").minus({days:15}).toISO(),end:i.ou.now().endOf("day").toISO()},{id:5,name:"Last 30 days",start:i.ou.now().endOf("day").minus({days:30}).toISO(),end:i.ou.now().endOf("day").toISO()},{id:6,name:"Last 60 days",start:i.ou.now().endOf("day").minus({days:60}).toISO(),end:i.ou.now().endOf("day").toISO()},{id:7,name:"Last 90 days",start:i.ou.now().endOf("day").minus({days:90}).toISO(),end:i.ou.now().endOf("day").toISO()}],j=0;function w(e){e=null!==e?e:(0,r.Z)(new TypeError("Cannot destructure undefined"));var t,s,f=(0,n.Z)((0,b.Z)("layout.title","Website",!0),2),w=(f[0],f[1],(0,d.useState)((0,g.tl)("website.analytics"))),N=w[0],O=w[1],S=(0,d.useState)(0),I=S[0],_=S[1],k=(0,d.useState)(v[4]),Z=k[0],E=k[1],C=(0,d.useState)(),D=C[0],F=C[1],M=(0,m.Z)().get,L=(0,y.useRouter)();function T(){return A.apply(this,arguments)}function A(){return(A=(0,a.Z)((function(){var e;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,M("/website/get-online-users")];case 1:return(e=t.sent())&&!0===e.status&&void 0!==e.content&&null!==e.content?_(e.content):g.Z9.error(e.message),[2]}}))}))).apply(this,arguments)}function z(){return(z=(0,a.Z)((function(e){var t;return(0,l.__generator)(this,(function(s){switch(s.label){case 0:return[4,M("/website/get-analytics",e)];case 1:return(t=s.sent())&&!0===t.status&&t.content?((0,g.Fs)("website.analytics",t.content),O(t.content)):g.Z9.error(t.message),[2]}}))}))).apply(this,arguments)}function B(){return(B=(0,a.Z)((function(e){var t;return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[4,M("/website/get")];case 1:return(t=e.sent())&&!0===t.status&&t.content?"disabled"!==t.content.status?[3,3]:[4,L.push("/website/settings")]:[3,4];case 2:e.sent(),e.label=3;case 3:return(0,g.Fs)("website",t.content),F(t.content),[3,5];case 4:g.Z9.error(t.message),e.label=5;case 5:return[2]}}))}))).apply(this,arguments)}return(0,d.useEffect)((function(){T(),function(e){z.apply(this,arguments)}(Z);var e=setInterval(T,1e4);return function(){clearInterval(e)}}),[Z]),(0,d.useEffect)((function(){!function(e){B.apply(this,arguments)}()}),[]),(0,d.useEffect)((function(){if(N){var e=[],t=[],s=0,a=[],n=Math.ceil(i.ou.fromISO(Z.end).diff(i.ou.fromISO(Z.start),"days").toObject().days||0);if(n>1)for(var r=1;r<=n;r++){var l=i.ou.fromISO(Z.start).plus({days:r}).toFormat("DD");e.push(l),t[l]=null,a.push(l)}else{var o=i.ou.fromISO(Z.start).toFormat("DD");e.push(o),t[o]=null,a.push(o)}for(var d=0;d<N.pages.length;d++)for(var c=N.pages[d],u=0;u<c.dates.length;u++){var x=i.ou.fromISO(c.dates[u]).toFormat("DD");t[x]+=1}for(var m=0;m<n;m++){var g=t[m];g>s&&(s=g)}var f=Object.keys(t).map((function(e){var s=t[e];return s||null})),h=document.getElementById("visits-per-day-chart");if(h){var b=new p.Z(h,{type:"line",data:{labels:a,datasets:[{label:"Visits",data:f,xAxisID:"x",backgroundColor:["rgba(79, 69, 228, 1)"],borderColor:["rgba(79, 69, 228, 1)"],borderWidth:3,pointRadius:4,pointHoverRadius:8,pointBackgroundColor:a.length>1?"rgba(0,0,0,0)":"rgba(79, 69, 228, 1)",pointBorderColor:a.length>1?"rgba(0,0,0,0)":"rgba(79, 69, 228, 1)",pointHoverBackgroundColor:"rgba(79, 69, 228, 1)",pointHoverBorderColor:"rgba(79, 69, 228, 1)",borderJoinStyle:"round",tension:.01}]},options:{responsive:!0,spanGaps:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{stepSize:5}},x:{type:"category",labels:a,display:!0,grid:{display:!1,drawBorder:!1,drawOnChartArea:!1},offset:!0,ticks:{maxRotation:0,callback:function(e,t){var s=Math.floor(a.length/5);return 0==t||t%s==0||t==a.length-1?i.ou.fromFormat(a[t],"DD").toFormat("MMM dd"):""}}}},plugins:{legend:{display:!1}}}});return function(){b.destroy()}}}}),[N]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center justify-start gap-3 mb-4 lg:mb-6",children:[(0,o.jsx)(x.Z,{className:"w-40 mr-auto",values:v,value:Z,onChange:function(e){return E(e)}}),"public"===(null===D||void 0===D?void 0:D.status)&&(0,o.jsx)(h(),{href:D.sslCertificate||"active"===(null===(t=D.cloudflare)||void 0===t||null===(s=t.ssl)||void 0===s?void 0:s.status)?"https://"+D.domain:"http://"+(D.subdomain+(0,g.lz)()),children:(0,o.jsxs)("a",{className:"button secondary gap-1",target:"_blank",children:["View ",(0,o.jsx)("span",{className:"hidden sm:inline",children:"website"}),(0,o.jsx)(c.Z,{icon:"ExternalLinkIcon",className:"w-4 h-4 ml-1"})]})}),(0,o.jsx)(h(),{href:"/website/builder",children:(0,o.jsxs)("a",{className:"button primary gap-1",children:["Edit ",(0,o.jsx)("span",{className:"hidden sm:inline",children:"website"})]})})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6 mb-4 lg:mb-6 items-start",children:[(0,o.jsxs)("div",{className:"rounded-lg shadow bg-white p-4 lg:p-6 flex items-center",children:[(0,o.jsxs)("div",{className:(0,g.AK)(I>0?"bg-green-50":"bg-indigo-50","rounded p-4 mr-6 relative"),children:[(0,o.jsx)(c.Z,{icon:"SparklesIcon",className:(0,g.AK)("w-6 h-6  z-5 relative",I>0?"text-green-600":"text-indigo-600")}),(0,o.jsx)(c.Z,{icon:"SparklesIcon",className:(0,g.AK)("w-6 h-6 text-green-300 z-1 absolute top-4",I>0?"animate-ping":"")})]}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("p",{className:"text-body text-gray-900",children:"Online users"}),(0,o.jsx)("h4",{className:(0,g.AK)(I>0?"text-green-600":"text-indigo-600"),children:I})]})]}),N?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"rounded-lg shadow bg-white p-4 lg:p-6 flex items-center",children:[(0,o.jsx)("div",{className:"bg-indigo-50 rounded p-4 mr-6",children:(0,o.jsx)(c.Z,{icon:"UserGroupIcon",className:"w-6 h-6 text-indigo-600 z-20"})}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("p",{className:"text-body text-gray-900",children:"Unique visitors"}),(0,o.jsx)("h4",{className:"text-indigo-600",children:N.unique})]})]}),(0,o.jsxs)("div",{className:"rounded-lg shadow bg-white p-4 lg:p-6 flex items-center",children:[(0,o.jsx)("div",{className:"bg-indigo-50 rounded p-4 mr-6",children:(0,o.jsx)(c.Z,{icon:"EyeIcon",className:"w-6 h-6 text-indigo-600 z-20"})}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("p",{className:"text-body text-gray-900",children:"Page views"}),(0,o.jsx)("h4",{className:"text-indigo-600",children:function(){j=0;for(var e=0;e<N.pages.length;e++)j+=N.pages[e].opens;return j}()})]})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Z,{variant:"widget"}),(0,o.jsx)(u.Z,{variant:"widget"})]}),D&&N?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"rounded-lg shadow bg-white flex flex-col p-4 lg:p-6",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("p",{className:"text-body font-medium text-gray-900",children:"Device"}),(0,o.jsx)("p",{className:"text-body font-medium text-gray-900",children:"Views"})]}),0===N.pages.length?(0,o.jsxs)("p",{className:"mt-4 text-gray-900",children:["No visits ",Z.name.toLowerCase()]}):(0,o.jsxs)("ul",{role:"list",className:"w-full",children:[(0,o.jsxs)("li",{className:"flex w-full pb-1 lg:pb-2 pt-6 lg:pt-7 relative justify-start border-b-4 border-indigo-50 items-center",children:[(0,o.jsx)("p",{className:"text-label font-bold text-gray-600 truncate group-hover:text-indigo-600 mb-0",children:"Desktop"}),(0,o.jsxs)("p",{className:"text-label font-bold text-gray-600 truncate group-hover:text-indigo-600 mb-0 ml-auto mr-2",children:["  ",N.desktop]}),(0,o.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:N.mobile+N.desktop>0?"".concat((N.desktop/(N.mobile+N.desktop)*100).toFixed(1),"%"):"0%"}),(0,o.jsx)("div",{className:"absolute -bottom-1 left-0 h-1 bg-indigo-500 group-hover:bg-indigo-600",style:{width:"".concat(N.desktop/(N.mobile+N.desktop)*100,"%")}})]},"desktop"),(0,o.jsxs)("li",{className:"flex w-full pb-1 lg:pb-2 pt-6 lg:pt-7 relative justify-start border-b-4 border-indigo-50",children:[(0,o.jsx)("p",{className:"text-label font-bold text-gray-600 truncate group-hover:text-indigo-600 mb-0",children:"Mobile"}),(0,o.jsx)("p",{className:"text-label font-bold text-gray-600 truncate group-hover:text-indigo-600 mb-0 ml-auto mr-2",children:N.mobile}),(0,o.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:N.mobile+N.desktop>0?"".concat((N.mobile/(N.mobile+N.desktop)*100).toFixed(1),"%"):"0%"}),(0,o.jsx)("div",{className:"absolute -bottom-1 left-0 h-1 bg-indigo-500 group-hover:bg-indigo-600",style:{width:"".concat(N.mobile/(N.mobile+N.desktop)*100,"%")}})]},"mobile")]})]}),(0,o.jsxs)("div",{className:"rounded-lg shadow bg-white flex flex-col p-4 lg:p-6",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("p",{className:"text-body font-medium text-gray-900",children:"Pages"}),(0,o.jsx)("p",{className:"text-body font-medium text-gray-900 mr-7",children:"Views"})]}),0===N.pages.length&&(0,o.jsxs)("p",{className:"mt-4 text-gray-900",children:["No visits ",Z.name.toLowerCase()]}),(0,o.jsx)("ul",{role:"list",className:" w-full",children:N.pages.slice(0,5).map((function(e,t){var s,a;return(0,o.jsx)("li",{children:(0,o.jsx)(h(),{href:"".concat(D.sslCertificate||"active"===(null===(s=D.cloudflare)||void 0===s||null===(a=s.ssl)||void 0===a?void 0:a.status)?"https://"+D.domain:"http://"+(D.subdomain+(0,g.lz)())).concat(e.page),children:(0,o.jsxs)("a",{target:"_blank",className:"group flex justify-between pb-1 md:pb-2 pt-5 md:pt-6 relative border-b-4 border-indigo-50 max-w-full gap-1",children:[(0,o.jsx)("p",{className:"text-label font-bold text-gray-600 truncate group-hover:text-indigo-600 mb-0",children:e.title}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 mr-3",children:e.opens}),(0,o.jsx)(c.Z,{icon:"ExternalLinkIcon",className:"w-4 h-4 text-gray-500 group-hover:text-gray-900"})]}),(0,o.jsx)("div",{className:"absolute -bottom-1 left-0 h-1 bg-indigo-500 group-hover:bg-indigo-600",style:{width:"".concat(e.opens/j*100,"%")}})]})})},t)}))})]}),(0,o.jsxs)("div",{className:"rounded-lg shadow bg-white flex flex-col p-4 lg:p-6",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("p",{className:"text-body font-medium text-gray-900",children:"Pages"}),(0,o.jsx)("p",{className:"text-body font-medium text-gray-900 mr-7",children:"Scrolls"})]}),0===N.pages.length&&(0,o.jsxs)("p",{className:"mt-4 text-gray-900",children:["No visits ",Z.name.toLowerCase()]}),(0,o.jsx)("ul",{role:"list",className:"w-full",children:function(){for(var e=0,t=0;t<N.pages.length;t++)e+=N.pages[t].scrolls;var s=N.pages.map((function(e){return e}));return s.sort((function(e,t){return t.scrolls-e.scrolls})),s.slice(0,5).map((function(t,s){var a,n;return(0,o.jsx)("li",{children:(0,o.jsx)(h(),{href:"".concat(D.sslCertificate||"active"===(null===(a=D.cloudflare)||void 0===a||null===(n=a.ssl)||void 0===n?void 0:n.status)?"https://"+D.domain:"http://"+(D.subdomain+(0,g.lz)())).concat(t.page),children:(0,o.jsxs)("a",{target:"_blank",className:"group flex justify-between pb-1 md:pb-2 pt-5 md:pt-6 relative border-b-4 border-indigo-50 max-w-full gap-1",children:[(0,o.jsx)("p",{className:"text-label font-bold text-gray-600 truncate group-hover:text-indigo-600 mb-0",children:t.title}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 mr-3",children:t.scrolls}),(0,o.jsx)(c.Z,{icon:"ExternalLinkIcon",className:"w-4 h-4 text-gray-500 group-hover:text-gray-900"})]}),(0,o.jsx)("div",{className:"absolute -bottom-1 left-0 h-1 bg-indigo-500 group-hover:bg-indigo-600",style:{width:"".concat(t.scrolls/e*100,"%")}})]})})},s)}))}()})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Z,{variant:"table",cols:"2",rows:"2"}),(0,o.jsx)(u.Z,{variant:"table",cols:"3",rows:"5"}),(0,o.jsx)(u.Z,{variant:"table",cols:"3",rows:"5"})]})]}),N?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"rounded-lg shadow bg-white flex flex-col p-4 lg:p-6 lg:col-span-2 xl:col-span-3 mb-6",children:[(0,o.jsx)("div",{className:"flex justify-between mb-2",children:(0,o.jsx)("p",{className:"text-body font-medium text-gray-900",children:"Visits per day"})}),(0,o.jsx)("div",{className:"chart-container",style:{position:"relative",height:"300px",width:"100%"},children:(0,o.jsx)("canvas",{id:"visits-per-day-chart"})})]}),(0,o.jsxs)("div",{className:"rounded-lg shadow bg-white flex flex-col p-4 lg:p-6 lg:col-span-2 xl:col-span-3",children:[(0,o.jsx)("div",{className:"flex justify-between",children:(0,o.jsx)("p",{className:"text-body font-medium text-gray-900",children:"Most busy hours"})}),(0,o.jsx)("ul",{className:"flex space-x-1 h-48 w-full pt-4 overflow-x-auto mg:overflow-x-hidden",children:function(){for(var e=[],t=[],s=0,a=0;a<24;a++)e.push(a),t[a]=0;for(var n=0;n<N.pages.length;n++)for(var r=N.pages[n],l=0;l<r.dates.length;l++){var d=i.ou.fromISO(r.dates[l]).get("hour");t[d]+=1,1}for(var c=0;c<24;c++){var u=t[c];u>s&&(s=u)}return e.map((function(e){var a=t[e]/s*100;return(0,o.jsxs)("li",{className:"flex flex-1 h-full flex-col relative justify-end px-1 lg:px-0.5 xl:px-2",children:[(0,o.jsx)("div",{className:"text-center text-label-xs lg:text-body-sm py-2 text-gray-600",children:t[e]?t[e]:"-"}),(0,o.jsx)("div",{className:"relative bg-indigo-50 w-full h-full",children:(0,o.jsx)("div",{className:"absolute bg-indigo-600 bottom-0 left-0 right-0",style:{height:"".concat(a||0,"%")}})}),(0,o.jsx)("div",{className:"pt-4 text-center text-label-xs lg:text-body-sm text-gray-900",children:e.toString().padStart(2,"0")})]},e)}))}()})]})]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.Z,{variant:"table",rows:"2"})})]})}w.auth=!0}},function(e){e.O(0,[7570,2475,9774,2888,179],(function(){return t=73488,e(e.s=t);var t}));var t=e.O();_N_E=t}]);