(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7454],{51523:function(e,t,n){"use strict";var s=n(67294);function a(e){return e}t.Z=function(e){const[t,n]=s.useState(!1),i=s.useRef((()=>n(!1)));function r(){return n(!0)}function l(){return n(a)}return s.useEffect((()=>i.current),[e]),{copied:t,copy:s.useCallback((()=>function(e){if(navigator.clipboard)return navigator.clipboard.writeText(e);const t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",document.body.appendChild(t);const n=window.getSelection();if(!n)return Promise.reject();const s=window.document.createRange();n.removeAllRanges(),s.selectNode(t),n.addRange(s);try{window.document.execCommand("copy")}catch(a){return Promise.reject()}return n.removeAllRanges(),window.document.body.removeChild(t),Promise.resolve()}(e).then(r).catch(l)),[e]),reset:i.current}}},56340:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/invoices/list",function(){return n(21047)}])},14441:function(e,t,n){"use strict";var s=n(85893),a=n(67294),i=n(30112),r=n(33303),l=(0,a.forwardRef)((function(e,t){var n=e.value,a=e.label,l=e.onClick,o=e.disabled,c=e.hint,u=e.className,d=e.labelClass,m=e.style,x=e.onClear;return(0,s.jsxs)("button",{className:(0,r.AK)("date-input light flex-1 w-full group",u),onClick:l,ref:t,disabled:o,style:m,children:[(0,s.jsx)(i.Z,{icon:"CalendarIcon",className:"h-4 w-4 mr-2"}),a&&(0,s.jsx)("span",{className:(0,r.AK)("text-gray-400",d),children:a}),n||(0,s.jsx)("span",{className:(0,r.AK)("text-gray-400",d),children:c}),"function"===typeof x&&n&&(0,s.jsx)("div",{className:"absolute opacity-0 group-hover:opacity-100 transition-opacity right-2 hover:text-indigo-500",onClick:function(e){e.stopPropagation(),x()},children:(0,s.jsx)(i.Z,{icon:"XCircleIcon",className:"h-5 w-5"})})]})}));l.displayName="DateInput",t.Z=l},48612:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var s=n(85893),a=n(11355),i=n(69737),r=n(67294),l=n(33303),o=n(30112);function c(e){var t=e.open,n=e.setOpen,c=e.children,u=e.onFilter,d=(0,l.ac)("(min-width: 768px)");return(0,r.useEffect)((function(){t&&d&&n(!1)}),[d]),(0,s.jsx)(a.u.Root,{show:t,as:r.Fragment,children:(0,s.jsx)(i.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",onClose:function(){return!1},children:(0,s.jsxs)("div",{className:"flex items-end justify-center min-h-screen text-center md:block",children:[(0,s.jsx)(a.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)(i.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,s.jsx)("span",{className:"hidden md:inline-block md:align-middle md:h-screen","aria-hidden":"true",children:"\u200b"}),(0,s.jsx)(a.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,s.jsxs)("div",{className:"block md:inline-block w-full md:max-w-md md:align-middle bg-white rounded-t-2xl md:rounded-lg px-4 py-8 md:pt-4 text-left overflow-hidden shadow-xl transform transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("h4",{className:"flex items-center",children:[(0,s.jsx)(o.Z,{icon:"AdjustmentsIcon",className:"w-6 h-6 text-indigo-500 mr-2"}),"Filter"]}),(0,s.jsx)("div",{className:"p-2",onClick:function(){return n(!1)},children:(0,s.jsx)(o.Z,{icon:"XIcon",className:"w-6 h-6"})})]}),(0,s.jsx)("div",{className:"flex flex-col space-y-4",children:c}),"function"===typeof u&&(0,s.jsx)("div",{className:"mt-5 md:mt-6",children:(0,s.jsx)("button",{type:"button",className:"primary lg w-full",onClick:function(){return u()},children:"Filter"})})]})})]})})})}},21047:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var a=n(47568),i=n(26042),r=n(69396),l=n(10253),o=n(29815),c=n(70655),u=n(85893),d=n(30120),m=n(11163),x=n(67294),p=n(30112),f=n(16494),h=n(33303),v=n(41664),g=n.n(v),y=n(80360),b=(n(39828),n(43490)),j=n(65082),N=n(33299),w=n(74007),k=n(72510),I=n(59578),Z=n(11355),S=n(69737),C=n(51523);function R(e){var t=e.domain,n=e.invoice,s=e.open,a=e.setOpen,i=(0,x.useState)("https://".concat(t,"/checkout/").concat(null===n||void 0===n?void 0:n._id)),r=i[0],l=i[1],o=(0,C.Z)(r),c=o.copied,d=o.copy,m=o.reset,f=(0,N.useSession)().data;return(0,x.useEffect)((function(){n&&l("https://".concat(t,"/checkout/").concat(n._id))}),[n]),(0,u.jsx)(Z.u.Root,{show:s,as:x.Fragment,children:(0,u.jsx)(S.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",onClose:a,children:(0,u.jsxs)("div",{className:"flex items-end lg:items-center justify-center min-h-screen lg:pt-4 lg:px-4 lg:pb-20 text-center sm:block sm:p-0",children:[(0,u.jsx)(Z.u.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsx)(S.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,u.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,u.jsx)(Z.u.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,u.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg px-8 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6 justify-center",children:!0===f.user.stripeVerified?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,u.jsx)(p.Z,{icon:r?"CheckIcon":"ShareIcon",className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),(0,u.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,u.jsxs)(S.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:[r?"Share":"Generate"," the payment URL"]}),(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Send this payment URL to your customers so they can pay you."})})]})]}),(0,u.jsxs)("div",{className:"mt-5 sm:mt-6 flex flex-col md:flex-row",children:[(0,u.jsx)("button",{type:"button",className:"primary flex-grow md:mr-4 mb-4 md:mb-0",onClick:function(){d(),h.Z9.default("Link copied to clipboard"),setTimeout(m,3e3)},children:c?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p.Z,{icon:"CheckIcon",className:"w-5 h-5 mr-2"})," Copied!"]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p.Z,{icon:"ClipboardCopyIcon",className:"w-5 h-5 mr-2"})," Copy to clipboard"]})}),(0,u.jsx)(g(),{href:r||"",children:(0,u.jsxs)("a",{className:"button secondary ",target:"_blank",children:[(0,u.jsx)(p.Z,{icon:"ExternalLinkIcon",className:"w-5 h-5 mr-2"}),"Open URL"]})})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,u.jsx)(p.Z,{icon:"IdentificationIcon",className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,u.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,u.jsx)(S.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:"Payments are disable for this account"}),(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Please verify your account before receiving payments."})})]})]}),(0,u.jsx)("div",{className:"mt-5 sm:mt-6 flex justify-center",children:(0,u.jsx)(g(),{href:"/money/dashboard",children:(0,u.jsx)("a",{className:"button primary",children:"Verify account"})})})]})})})]})})})}var F=n(48612),_=n(12015),T=n(51121),P=n(57333),E=n(52077),O=n(78548);function A(e){var t,n=e.open,s=e.setOpen,l=e.onSuccess,o=(0,x.useState)(!1),d=o[0],m=o[1],f=(0,x.useState)(null),v=f[0],g=f[1],y=(0,x.useState)(!0),b=y[0],N=y[1],w=(0,x.useState)(!1),k=(w[0],w[1]),I=(0,x.useState)(null),C=I[0],R=I[1],F=(0,j.Z)().post;(0,x.useEffect)((function(){!function(){var e;null===v||v&&(null===v||void 0===v?void 0:v.firstName)&&(null===v||void 0===v?void 0:v.accountNumber)&&(null===v||void 0===v?void 0:v.routingNumber)&&9==(null===v||void 0===v||null===(e=v.routingNumber)||void 0===e?void 0:e.length)?N(!0):N(!1)}()}),[v]);var _=function(){var e=(0,a.Z)((function(){var e,t;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return v&&(null===v||void 0===v?void 0:v.firstName)&&(null===v||void 0===v?void 0:v.accountNumber)&&(null===v||void 0===v?void 0:v.routingNumber)?[3,1]:(N(!1),[3,3]);case 1:return m(!0),v.accountType="personal_checking",v.country="us",[4,F("/money/create-external-bank-account",v).catch(console.log)];case 2:(e=n.sent())&&!0===e.status?((null===e||void 0===e||null===(t=e.content)||void 0===t?void 0:t.verificationLink)?h.Z9.successNoClose("Account created!"):h.Z9.success("Account created!"),"function"===typeof l&&l(),g({}),s(!1)):h.Z9.error("Error saving this payee, please try again. "+e.message),m(!1),n.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),A=function(){s(!1),setTimeout((function(){return g({})}),500)};return(0,x.useEffect)((function(){v&&C&&(JSON.stringify(C)===JSON.stringify(v)?k(!1):k(!0))}),[v,C]),(0,x.useEffect)((function(){n?(v&&!v.country&&(v.country="US"),R((0,h.p$)(v))):R(null)}),[n]),(0,u.jsx)(Z.u.Root,{show:n,as:x.Fragment,children:(0,u.jsxs)(S.V,{as:"div",className:"fixed inset-0 z-100",onClose:function(){return A()},children:[(0,u.jsx)(Z.u.Child,{as:x.Fragment,enter:"transition ease-in-out duration-400",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in-out duration-400",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsx)(S.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,u.jsx)("div",{className:"fixed inset-y-0 max-w-full right-0 flex z-50",children:(0,u.jsx)(Z.u.Child,{as:x.Fragment,appear:"true",enter:"transform transition transition-all ease-in-out duration-500",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition transition-all ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,u.jsx)("div",{className:"relative w-screen max-w-md md:max-w-sm translate-x-full",children:(0,u.jsxs)("div",{className:"relative h-full w-screen max-w-full items-stretch flex flex-col bg-white shadow-xl overflow-y-auto overflow-x-hidden",children:[(0,u.jsxs)("div",{className:"max-w-full sticky top-0 flex items-center justify-between bg-white border-b z-10 p-4 lg:p-6",children:[(0,u.jsx)(S.V.Title,{className:"font-bold text-gray-900",children:(null===v||void 0===v?void 0:v._id)?"Edit external account":"Add external account"}),(0,u.jsxs)("button",{type:"button",className:"flex-shrink-0",onClick:function(){return A()},children:[(0,u.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,u.jsx)(p.Z,{icon:"XIcon",className:"h-5 w-5","aria-hidden":"true"})]})]}),(0,u.jsxs)("div",{className:"flex-1 flex flex-col p-4 lg:p-6 gap-4",children:[(0,u.jsx)("div",{className:"mt-4",children:(0,u.jsx)(O.U,{variant:"info",text:"Add a bank account to enable payouts."})}),(0,u.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,u.jsx)("p",{className:"font-medium text-gray-900",children:"Account owner information"}),(0,u.jsx)(T.Z,{className:"w-full",name:"firstName",error:!b&&(!v||!v.firstName||!/[a-z]/gi.test(v.firstName))&&"You must inform the account's owner name.",value:(null===v||void 0===v?void 0:v.firstName)||"",onChange:function(e){return g((function(t){return(0,r.Z)((0,i.Z)({},t),{firstName:e})}))},type:"text",label:"First name"}),(0,u.jsx)(T.Z,{className:"w-full",name:"lastName",value:(null===v||void 0===v?void 0:v.lastName)||"",onChange:function(e){return g((function(t){return(0,r.Z)((0,i.Z)({},t),{lastName:e})}))},type:"text",label:"Last name"})]}),(0,u.jsx)("hr",{}),(0,u.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,u.jsx)("p",{className:"font-medium text-gray-900",children:"Account information"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"mb-1",children:"Account number"}),(0,u.jsx)(P.Z,{allowLeadingZeros:!0,className:(0,h.AK)("input",b||(null===v||void 0===v?void 0:v.accountNumber)?"":"error"),value:(null===v||void 0===v?void 0:v.accountNumber)||"",onChange:function(e){return g((0,r.Z)((0,i.Z)({},v),{accountNumber:e.target.value}))}}),!b&&!(null===v||void 0===v?void 0:v.accountNumber)&&(0,u.jsx)("span",{className:"-mt-1 text-red-600 text-sm mb-4",children:"You must inform the account number"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"mb-1",children:"Routing number"}),(0,u.jsx)(P.Z,{className:(0,h.AK)("input",b||(null===v||void 0===v?void 0:v.routingNumber)?"":"error"),value:(null===v||void 0===v?void 0:v.routingNumber)||"",onChange:function(e){return g((0,r.Z)((0,i.Z)({},v),{routingNumber:e.target.value}))}}),(null===v||void 0===v?void 0:v.routingNumber)&&9!=(null===v||void 0===v||null===(t=v.routingNumber)||void 0===t?void 0:t.length)&&(0,u.jsx)("span",{className:"-mt-1 text-red-600 text-sm mb-4",children:"You must inform a valid routing number"}),!b&&!(null===v||void 0===v?void 0:v.routingNumber)&&(0,u.jsx)("span",{className:"-mt-1 text-red-600 text-sm mb-4",children:"You must inform the routing number"})]})]})]}),(0,u.jsxs)("div",{className:(0,h.AK)("sticky left-0 right-0 z-50 flex items-center justify-between gap-3 p-4 lg:px-6 bg-white border-t border-gray-100 transition-all duration-300 bottom-0 opacity-100"),children:[(0,u.jsx)("p",{className:"text-sm font-medium",children:"Unsaved"}),(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("button",{className:"secondary",disabled:d,onClick:function(){return g((0,h.p$)(C)),void k(!1)},children:"Discard"}),(0,u.jsx)(E.Z,{className:"primary",disabled:!b,onClick:function(){return _()},loading:d,children:"Save"})]})]})]})})})})]})})}var D=n(74274),M=n(5625),L=n(86067),z=n(53371),V=n(48764).Buffer,U={statuses:["draft","paid","unpaid","past-due"],idCustomer:null};function K(){var e,t,n,v,Z,S,C,T,P,O,K,q,B,G,Q,Y=(0,l.Z)((0,L.Z)("layout.title","Invoicing",!0),2),J=(Y[0],Y[1],(0,x.useState)(!1)),X=J[0],$=J[1],H=(0,x.useState)(1),W=H[0],ee=H[1],te=(0,x.useState)((0,h.tl)("invoices")),ne=te[0],se=te[1],ae=(0,x.useState)((0,h.tl)("invoices.customers")),ie=ae[0],re=ae[1],le=(0,x.useState)(!1),oe=le[0],ce=le[1],ue=(0,x.useState)(!1),de=ue[0],me=ue[1],xe=(0,x.useState)(!1),pe=xe[0],fe=xe[1],he=(0,x.useState)(!1),ve=he[0],ge=he[1],ye=(0,x.useState)(!1),be=ye[0],je=ye[1],Ne=(0,x.useState)(null),we=Ne[0],ke=Ne[1],Ie=(0,x.useState)((0,h.tl)("business.config")),Ze=Ie[0],Se=Ie[1],Ce=(0,l.Z)((0,L.Z)("layout.restrictedMenus",null),2),Re=(Ce[0],Ce[1],(0,x.useState)(!1)),Fe=Re[0],_e=Re[1],Te=(0,x.useState)(!1),Pe=Te[0],Ee=Te[1],Oe=(0,x.useState)(-1),Ae=Oe[0],De=Oe[1],Me=(0,j.Z)(),Le=Me.get,ze=Me.post,Ve=(0,m.useRouter)(),Ue=(0,N.useSession)().data,Ke=Ve.query.state,qe=Ke&&JSON.parse(V.from(Ke,"base64").toString()),Be=qe?(0,i.Z)({},qe):U,Ge=(0,x.useState)(Be),Qe=Ge[0],Ye=Ge[1],Je=function(){var e=(0,a.Z)((function(e){var t,n;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return(0,h.qE)(null===Ue||void 0===Ue||null===(t=Ue.user)||void 0===t?void 0:t.subscriptionStatus)?($(!0),[4,Le("/invoice/get-by-filter",(0,i.Z)({page:W,perPage:10},e)).catch(console.log)]):[3,2];case 1:return(n=s.sent())&&!0===n.status&&n.content&&((0,h.Fs)("invoices",n.content),se(n.content)),$(!1),[3,3];case 2:se({total:0,invoices:[]}),s.label=3;case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=(0,a.Z)((function(){var e;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Le("/business/get-config")];case 1:return(e=t.sent())&&!0===e.status&&e.content&&((0,h.Fs)("business.config",e.content),Se(e.content)),[2]}}))}));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=(0,a.Z)((function(){var e;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Le("/invoice/count-invoices-this-month")];case 1:return(e=t.sent())&&!0===e.status&&e.content?De(e.content||0):De(0),[2]}}))}));return function(){return e.apply(this,arguments)}}(),He=function(){var e=(0,a.Z)((function(e){var t,n,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return(0,h.qE)(null===Ue||void 0===Ue||null===(t=Ue.user)||void 0===t?void 0:t.subscriptionStatus)?[4,Le("/customer/get-by-filter",{page:W,perPage:99,q:e}).catch(console.log)]:[3,2];case 1:(n=a.sent())&&!0===n.status&&n.content&&(s=[{name:"All contacts",id:null}].concat((0,o.Z)(n.content.customers.map((function(e){return{name:"".concat(e.firstName," ").concat(e.lastName||""),id:e._id}})))),(0,h.Fs)("invoices.customers",s),re(s)),a.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=(0,a.Z)((function(){var e,t;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return $(!0),[4,ze("/stripe/get-onboarding-url",{withMoney:!1})];case 1:return(e=n.sent())&&!0===e.status&&e.content.url?(0,N.signIn)("revalidate-token",{token:null===Ue||void 0===Ue||null===(t=Ue.user)||void 0===t?void 0:t.token,idBusiness:sessionStorage.getItem("idBusiness"),callbackUrl:"/my-business/settings",redirect:!1}).then(function(){var t=(0,a.Z)((function(t){return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Ve.push(e.content.url)];case 1:return t.sent(),$(!1),[2]}}))}));return function(e){return t.apply(this,arguments)}}()).catch(console.log).then((function(){})):(h.Z9.error(e.message),$(!1)),[2]}}))}));return function(){return e.apply(this,arguments)}}(),et=(function(){var e=(0,a.Z)((function(){var e,t;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return $(!0),[4,ze("/stripe/get-onboarding-url",{withMoney:!0})];case 1:return(e=n.sent())&&!0===e.status&&e.content.url?(0,N.signIn)("revalidate-token",{token:null===Ue||void 0===Ue||null===(t=Ue.user)||void 0===t?void 0:t.token,idBusiness:sessionStorage.getItem("idBusiness"),callbackUrl:"/my-business/settings",redirect:!1}).then(function(){var t=(0,a.Z)((function(t){return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Ve.push(e.content.url)];case 1:return t.sent(),$(!1),[2]}}))}));return function(e){return t.apply(this,arguments)}}()).catch(console.log).then((function(){})):h.Z9.error(e.message),$(!1),[2]}}))}))}(),function(e){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(y.Z,{className:"min-w-80 w-full",inline:e,values:ie,value:Qe.idCustomer&&(null===ie||void 0===ie?void 0:ie.find((function(e){return e.id===Qe.idCustomer}))),placeholder:"All contacts",hasFilter:!0,filterFunction:He,onChange:function(e){return Ye((0,r.Z)((0,i.Z)({},Qe),{idCustomer:e.id}))}}),(0,u.jsxs)(D.Z,{buttonClassName:"light min-w-40 lg:max-w-40 w-full",button:(0,u.jsxs)("div",{className:"flex flex-1 justify-between items-center",children:[(0,u.jsx)("span",{children:"Status"}),(0,u.jsx)(p.Z,{icon:"ChevronDownIcon",className:"h-5 w-5"})]}),inline:e,children:[(0,u.jsxs)("label",{className:"flex items-center justify-between py-2.5 px-3",children:[(0,u.jsx)("span",{className:"px-2.5 py-0.5 inline-flex text-xs leading-5 font-medium rounded-full bg-gray-100 text-gray-800",children:"Draft"}),(0,u.jsx)(b.Z,{onChange:function(e){e?Qe.statuses.includes("draft")||Ye((0,r.Z)((0,i.Z)({},Qe),{statuses:(0,o.Z)(Qe.statuses).concat(["draft"])})):Qe.statuses.includes("draft")&&Ye((0,r.Z)((0,i.Z)({},Qe),{statuses:(0,o.Z)(Qe.statuses.filter((function(e){return"draft"!==e})))}))},enabled:Qe.statuses.includes("draft")})]}),(0,u.jsxs)("label",{className:"flex items-center justify-between py-2.5 px-3",children:[(0,u.jsx)("span",{className:"px-2.5 py-0.5 inline-flex text-xs leading-5 font-medium rounded-full bg-green-100 text-green-800",children:"Paid"}),(0,u.jsx)(b.Z,{onChange:function(e){e?Qe.statuses.includes("paid")||Ye((0,r.Z)((0,i.Z)({},Qe),{statuses:(0,o.Z)(Qe.statuses).concat(["paid"])})):Qe.statuses.includes("paid")&&Ye((0,r.Z)((0,i.Z)({},Qe),{statuses:(0,o.Z)(Qe.statuses.filter((function(e){return"paid"!==e})))}))},enabled:Qe.statuses.includes("paid")})]}),(0,u.jsxs)("label",{className:"flex items-center justify-between py-2.5 px-3",children:[(0,u.jsx)("span",{className:"px-2.5 py-0.5 inline-flex text-xs leading-5 font-medium rounded-full bg-yellow-100 text-yellow-800",children:"Unpaid"}),(0,u.jsx)(b.Z,{onChange:function(e){e?Qe.statuses.includes("unpaid")||Ye((0,r.Z)((0,i.Z)({},Qe),{statuses:(0,o.Z)(Qe.statuses).concat(["unpaid"])})):Qe.statuses.includes("unpaid")&&Ye((0,r.Z)((0,i.Z)({},Qe),{statuses:(0,o.Z)(Qe.statuses.filter((function(e){return"unpaid"!==e})))}))},enabled:Qe.statuses.includes("unpaid")})]}),(0,u.jsxs)("label",{className:"flex items-center justify-between py-2.5 px-3",children:[(0,u.jsx)("span",{className:"px-2.5 py-0.5 inline-flex text-xs leading-5 font-medium rounded-full bg-red-100 text-red-800",children:"Past due"}),(0,u.jsx)(b.Z,{onChange:function(e){e?Qe.statuses.includes("past-due")||Ye((0,r.Z)((0,i.Z)({},Qe),{statuses:(0,o.Z)(Qe.statuses).concat(["past-due"])})):Qe.statuses.includes("past-due")&&Ye((0,r.Z)((0,i.Z)({},Qe),{statuses:(0,o.Z)(Qe.statuses.filter((function(e){return"past-due"!==e})))}))},enabled:Qe.statuses.includes("past-due")})]})]})]})});return(0,x.useEffect)((function(){if(!be){var e=V.from(JSON.stringify(Qe)).toString("base64");e!==Ve.query.state&&Ve.push(Ve.pathname+"?state="+e)}}),[Qe]),(0,x.useEffect)((function(){Je(Be),Ye(Be)}),[Ve.query,W]),(0,x.useEffect)((function(){Xe(),$e()}),[]),(0,x.useEffect)((function(){var e,t,n,s,a,i,r,l;Ze&&(null===Ze||void 0===Ze||null===(e=Ze.business)||void 0===e||null===(t=e.stripeDetails)||void 0===t||null===(n=t.featureRequested)||void 0===n?void 0:n.includes("ccPayments"))&&(null===Ze||void 0===Ze||null===(s=Ze.business)||void 0===s||null===(a=s.stripeDetails)||void 0===a||null===(i=a.requirements)||void 0===i?void 0:i.includes("external_account"))&&"express"!=(null===Ze||void 0===Ze||null===(r=Ze.business)||void 0===r||null===(l=r.stripeDetails)||void 0===l?void 0:l.accountType)&&ge(!0)}),[Ze]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(z.Z,{context:"cc_payments",open:Fe,setOpen:_e}),(0,u.jsx)(z.Z,{context:"invoice",open:Pe,setOpen:Ee}),(null===Ue||void 0===Ue?void 0:Ue.user)&&!(null===Ue||void 0===Ue||null===(e=Ue.user)||void 0===e?void 0:e.stripeVerified)&&(0,h.qE)(null===Ue||void 0===Ue||null===(t=Ue.user)||void 0===t?void 0:t.subscriptionStatus)&&(null===Ue||void 0===Ue||null===(n=Ue.user)||void 0===n?void 0:n.ccPaymentEnabled)&&(0,u.jsx)("div",{className:(0,h.AK)("w-full mx-auto",(null===ne||void 0===ne?void 0:ne.exists)?"":"max-w-3xl"),children:(0,u.jsx)("div",{className:(0,h.AK)("rounded-md p-4 my-6","ccPayments_pending"===(null===Ue||void 0===Ue||null===(v=Ue.user)||void 0===v?void 0:v.stripeOnboardingStatus)?"bg-yellow-50":"bg-blue-50"),children:(0,u.jsxs)("div",{className:"flex md:items-center gap-3",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)(p.Z,{icon:"InformationCircleIcon",className:(0,h.AK)("h-5 w-5","ccPayments_pending"===(null===Ue||void 0===Ue||null===(Z=Ue.user)||void 0===Z?void 0:Z.stripeOnboardingStatus)?"text-yellow-400":"text-blue-400"),"aria-hidden":"true"})}),(0,u.jsx)("div",{className:"flex-1 md:flex md:justify-between md:items-center",children:"ccPayments_pending"===(null===Ue||void 0===Ue||null===(S=Ue.user)||void 0===S?void 0:S.stripeOnboardingStatus)?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"text-yellow-800",children:"Your request is being processed."}),(0,u.jsxs)(E.Z,{type:"link",className:"link flex items-center gap-2 hover:opacity-70 !text-yellow-800",onClick:function(){var e,t,n,s,a,i;(null===Ue||void 0===Ue||null===(e=Ue.user)||void 0===e||null===(t=e.plan)||void 0===t||null===(n=t.features)||void 0===n?void 0:n.includes("money"))||(null===Ue||void 0===Ue||null===(s=Ue.user)||void 0===s||null===(a=s.plan)||void 0===a||null===(i=a.features)||void 0===i?void 0:i.includes("cc_payments"))?We():_e(!0)},loading:X,loadingText:"Please wait...",children:["Check your application",(0,u.jsx)(p.Z,{icon:"ArrowRightIcon",className:"w-4 h-4"})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"text-blue-800",children:"Apply to accept credit card payments."}),(0,u.jsxs)(E.Z,{type:"link",className:(0,h.AK)("link flex items-center gap-2 hover:opacity-70 !text-blue-800"),onClick:function(){var e,t,n,s,a,i;(null===Ue||void 0===Ue||null===(e=Ue.user)||void 0===e||null===(t=e.plan)||void 0===t||null===(n=t.features)||void 0===n?void 0:n.includes("money"))||(null===Ue||void 0===Ue||null===(s=Ue.user)||void 0===s||null===(a=s.plan)||void 0===a||null===(i=a.features)||void 0===i?void 0:i.includes("cc_payments"))?We():_e(!0)},loading:X,loadingText:"Please wait...",children:["Setup credit card payments",(0,u.jsx)(p.Z,{icon:"ArrowRightIcon",className:"w-4 h-4"})]})]})})]})})}),ne&&!ne.exists&&(0,u.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,u.jsx)("div",{className:"max-w-xl mb-6",children:(0,u.jsx)("p",{className:"text-h3 lg:text-h1 font-extrabold text-gray-900",children:"Get paid faster with professional invoices"})}),(0,u.jsxs)("div",{className:"flex items-center flex-wrap gap-4 mb-10",children:[Ae>=((null===Ue||void 0===Ue||null===(C=Ue.user)||void 0===C||null===(T=C.plan)||void 0===T||null===(P=T.limits)||void 0===P?void 0:P.invoices)||Number.MAX_SAFE_INTEGER)?(0,u.jsx)("button",{className:"button primary",onClick:function(){return Ee(!0)},children:"Create invoice"}):(0,u.jsx)(g(),{href:"/invoices/create",children:(0,u.jsx)("a",{className:"button primary",children:"Create invoice"})}),(0,u.jsx)(g(),{href:"https://help.durable.co/en-US/articles/invoicing-55543",children:(0,u.jsxs)("a",{className:"link flex items-center gap-2",target:"_blank",children:[(0,u.jsx)("span",{className:"text-sm",children:"Learn more"}),(0,u.jsx)(p.Z,{icon:"ExternalLinkIcon",className:"w-4 h-4"})]})})]}),(0,u.jsx)("div",{className:"flex items-center justify-center w-full h-[215px] sm:h-[380px] md:h-[420px] lg:h-[480px] rounded-lg shadow-lg bg-black overflow-hidden",children:(0,u.jsx)("iframe",{src:"https://www.loom.com/embed/1eab669a82644841ad5ef73873d30114",width:"100%",height:"100%",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})})]}),!ne||(null===ne||void 0===ne?void 0:ne.exists)&&Ae<0?(0,u.jsx)(f.Z,{variant:"table"}):"",ne&&ne.exists&&Ae>=0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"hidden lg:flex w-full items-center justify-between gap-3 mb-4 lg:mb-6",children:[(0,u.jsx)("div",{className:"flex items-center gap-3",children:et()}),(0,u.jsx)("div",{className:"flex items-center gap-3",children:Ae>=((null===Ue||void 0===Ue||null===(O=Ue.user)||void 0===O||null===(K=O.plan)||void 0===K||null===(q=K.limits)||void 0===q?void 0:q.invoices)||Number.MAX_SAFE_INTEGER)?(0,u.jsx)("button",{className:"button primary",onClick:function(){return Ee(!0)},children:"Create invoice"}):(0,u.jsx)(g(),{href:"/invoices/create",children:(0,u.jsx)("a",{className:"button primary",children:"Create invoice"})})})]}),(0,u.jsxs)("div",{className:"flex lg:hidden w-full items-center justify-between gap-3 mb-4 lg:mb-6",children:[(0,u.jsxs)("button",{className:"light",onClick:function(){return je(!0)},children:[(0,u.jsx)(p.Z,{icon:"FilterIcon",className:"w-4 h-4 mr-2"}),"Filter"]}),(0,u.jsx)("div",{className:"flex items-center gap-3",children:Ae>=((null===Ue||void 0===Ue||null===(B=Ue.user)||void 0===B||null===(G=B.plan)||void 0===G||null===(Q=G.limits)||void 0===Q?void 0:Q.invoices)||Number.MAX_SAFE_INTEGER)?(0,u.jsx)("button",{className:"button primary",onClick:function(){return Ee(!0)},children:"Create invoice"}):(0,u.jsx)(g(),{href:"/invoices/create",children:(0,u.jsx)("a",{className:"button primary",children:"Create invoice"})})})]}),(0,u.jsx)("div",{className:"flex flex-col",children:(0,u.jsx)("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:(0,u.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,u.jsxs)("div",{className:"shadow border-b border-gray-200 sm:rounded-lg",children:[(0,u.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 bg-gray-50 rounded-tl-lg tracking-wider",children:"Contact / Invoice #"}),(0,u.jsx)("th",{scope:"col",className:"hidden lg:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 bg-gray-50 tracking-wider",children:"Date issued"}),(0,u.jsx)("th",{scope:"col",className:"hidden md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 bg-gray-50 tracking-wider",children:"Due date"}),(0,u.jsx)("th",{scope:"col",className:"hidden md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 bg-gray-50 tracking-wider",children:"Total"}),(0,u.jsx)("th",{scope:"col",className:"md:hidden px-3 py-3 text-right text-xs font-medium text-gray-500 bg-gray-50 tracking-wider",children:"Total / Due Date"}),(0,u.jsx)("th",{scope:"col",className:"hidden md:table-cell px-6 py-3 text-left text-xs font-medium text-gray-500 bg-gray-50 tracking-wider",children:"Status"}),(0,u.jsx)("th",{scope:"col",className:"relative px-0 md:px-6 py-3 bg-gray-50 rounded-tr-lg",children:(0,u.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,u.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[0===ne.invoices.length&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"100%",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 bg-white rounded-b-lg",children:"No invoice found"})}),ne.invoices.map((function(e,t){var n;return(0,u.jsxs)("tr",{className:"bg-white hover:bg-gray-50 cursor-pointer",onClick:function(){return Ve.push("/invoices/preview/".concat(e._id))},children:[(0,u.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[(0,u.jsx)("span",{children:e.Customer?e.Customer.firstName+(e.Customer.lastName?" "+e.Customer.lastName:""):"-"}),(0,u.jsxs)("span",{className:"inline-block ml-1 text-gray-500 text-body-sm",children:["#",String(e.number).padStart(3,"0")]}),(0,u.jsxs)("p",{className:"flex items-center gap-1 md:hidden",children:["unpaid"===e.status||"expired"===e.status?e.sent?(0,u.jsx)("span",{className:"px-2 inline-flex text-label-xs leading-5 font-medium rounded-full bg-yellow-100 text-yellow-800",children:"Unpaid"}):(0,u.jsx)("span",{className:"px-2 inline-flex text-label-xs leading-5 font-medium rounded-full bg-gray-100 text-gray-800",children:"Draft"}):(0,u.jsx)("span",{className:"px-2 inline-flex text-label-xs leading-5 font-medium rounded-full bg-green-100 text-green-800",children:"Paid"}),"paid"!==e.status&&d.ou.fromISO(e.dueDate).endOf("day")<d.ou.now().startOf("day")&&(0,u.jsx)("span",{className:"px-2 inline-flex text-label-xs leading-5 font-medium rounded-full bg-red-100 text-red-800",children:"Past due"})]})]}),(0,u.jsx)("td",{className:"hidden lg:table-cell px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.ou.fromISO(e.date).toFormat("DD")}),(0,u.jsx)("td",{className:"hidden md:table-cell px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d.ou.fromISO(e.dueDate).toFormat("DD")}),(0,u.jsxs)("td",{className:"hidden md:table-cell px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",(Number((e.subtotal*(1+e.tax)).toFixed(2))+Number((e.includeFees?e.fee:0).toFixed(2))).toFixed(2)]}),(0,u.jsxs)("td",{className:"md:hidden px-3 py-3 whitespace-nowrap text-right pace-x-2",children:[(0,u.jsxs)("p",{className:"text-black font-medium",children:["$",(e.subtotal*(1+e.tax)+(e.includeFees?e.fee:0)).toFixed(2)]}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:d.ou.fromISO(e.dueDate).toFormat("dd LLL, yyyy")})]}),(0,u.jsxs)("td",{className:"hidden md:table-cell px-6 py-3 whitespace-nowrap text-sm text-gray-500 space-x-2",children:["unpaid"===e.status||"expired"===e.status?e.sent?(0,u.jsx)("span",{className:"px-2.5 py-0.5 inline-flex text-xs leading-5 font-medium rounded-full bg-yellow-100 text-yellow-800",children:"Unpaid"}):(0,u.jsx)("span",{className:"px-2.5 py-0.5 inline-flex text-xs leading-5 font-medium rounded-full bg-gray-100 text-gray-800",children:"Draft"}):(0,u.jsx)("span",{className:"px-2.5 py-0.5 inline-flex text-xs leading-5 font-medium rounded-full bg-green-100 text-green-800",children:"Paid"}),"paid"!==e.status&&d.ou.fromISO(e.dueDate).endOf("day")<d.ou.now().startOf("day")&&(0,u.jsx)("span",{className:"px-2.5 py-0.5 inline-flex text-xs leading-5 font-medium rounded-full bg-red-100 text-red-800",children:"Past due"})]}),(0,u.jsx)("td",{className:"px-2 md:px-6 py-4 text-right text-sm font-medium space-x-3 items-center align-middle",children:(0,u.jsxs)(w.Z,{inline:!0,buttonClassName:"button round hover:bg-indigo-50",openClassName:"bg-indigo-50",children:[(0,u.jsx)(k.v.Item,{as:"div",children:(0,u.jsx)(g(),{href:"/invoices/preview/".concat(e._id),children:(0,u.jsx)("a",{className:"block px-4 py-2.5 hover:bg-gray-100 text-gray-700",onClick:function(e){return e.stopPropagation()},children:"Preview"})})}),"paid"!==e.status&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(k.v.Item,{as:"div",children:(0,u.jsx)(g(),{href:"/invoices/".concat(e._id),children:(0,u.jsx)("a",{className:"block px-4 py-2.5 hover:bg-gray-100 text-gray-700",onClick:function(e){return e.stopPropagation()},children:"Edit"})})}),(0,u.jsx)(k.v.Item,{as:"div",children:(0,u.jsx)("p",{className:"block px-4 py-2.5 hover:bg-gray-100 text-gray-700 cursor-pointer",onClick:function(t){t.stopPropagation(),ke(e),fe(!0)},children:"Send"})})]}),(0,u.jsx)(k.v.Item,{as:"div",children:(0,u.jsx)(g(),{href:"https://".concat(ne.domain,"/invoice/print/").concat(e._id),children:(0,u.jsx)("a",{className:"block px-4 py-2.5 hover:bg-gray-100 text-gray-700",target:"_blank",onClick:function(e){return e.stopPropagation()},children:"Print"})})}),(0,u.jsx)(k.v.Item,{as:"div",children:(0,u.jsx)(g(),{href:"https://".concat(ne.domain,"/invoice/print/").concat(e._id),children:(0,u.jsx)("a",{className:"block px-4 py-2.5 hover:bg-gray-100 text-gray-700",target:"_blank",onClick:function(e){return e.stopPropagation()},children:"Download"})})}),"paid"!==e.status?(0,u.jsxs)(u.Fragment,{children:[(null===Ue||void 0===Ue||null===(n=Ue.user)||void 0===n?void 0:n.stripeVerified)&&(0,u.jsx)(k.v.Item,{as:"div",children:(0,u.jsx)("a",{className:"block px-4 py-2.5 cursor-pointer hover:bg-gray-100 text-gray-700",onClick:function(t){t.stopPropagation(),function(e){ke(e),me(!0)}(e)},children:"Share payment link"})}),(0,u.jsx)(k.v.Item,{as:"div",children:(0,u.jsx)("a",{className:"block px-4 py-2.5 cursor-pointer hover:bg-gray-100 text-gray-700",onClick:function(t){t.stopPropagation(),ke(e),ce(!0)},children:"Mark as paid"})})]}):(0,u.jsx)(k.v.Item,{as:"div",children:(0,u.jsx)(g(),{href:"https://".concat(ne.domain,"/invoice/").concat(e._id),children:(0,u.jsx)("a",{className:"block px-4 py-2.5 hover:bg-gray-100 text-gray-700",target:"_blank",onClick:function(e){return s.stopPropagation()},children:"Receipt"})})})]})})]},e._id)}))]})]}),ne.total>0&&(0,u.jsx)(M.Z,{className:"sticky bottom-0",page:W,results:ne,loading:X,setPage:ee})]})})})})]}),(0,u.jsx)(I.Z,{idInvoice:null===we||void 0===we?void 0:we._id,open:oe,setOpen:ce}),(0,u.jsx)(R,{domain:null===ne||void 0===ne?void 0:ne.domain,invoice:we,open:de,setOpen:me}),(0,u.jsx)(_.Z,{invoice:we,open:pe,setOpen:fe}),(0,u.jsx)(F.Z,{open:be,setOpen:je,onFilter:function(){var e=V.from(JSON.stringify(Qe)).toString("base64");e!==Ve.query.state&&Ve.push(Ve.pathname+"?state="+e),je(!1)},children:et(!0)}),(0,u.jsx)(A,{open:ve,setOpen:ge})]})}K.auth=!0},39828:function(){},72510:function(e,t,n){"use strict";n.d(t,{v:function(){return z}});var s,a,i=n(67294),r=n(32984),l=n(12351),o=n(9362),c=n(94192),u=n(16723),d=n(23784),m=n(19946),x=n(61363),p=n(11497),f=n(64103),h=n(84575),v=n(39650),g=n(31591),y=n(16567),b=n(14157),j=n(51074),N=n(73781),w=n(40476),k=n(55918),I=((a=I||{})[a.Open=0]="Open",a[a.Closed=1]="Closed",a),Z=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Z||{}),S=((s=S||{})[s.OpenMenu=0]="OpenMenu",s[s.CloseMenu=1]="CloseMenu",s[s.GoToItem=2]="GoToItem",s[s.Search=3]="Search",s[s.ClearSearch=4]="ClearSearch",s[s.RegisterItem=5]="RegisterItem",s[s.UnregisterItem=6]="UnregisterItem",s);function C(e,t=(e=>e)){let n=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,s=(0,h.z2)(t(e.items.slice()),(e=>e.dataRef.current.domRef.current)),a=n?s.indexOf(n):null;return-1===a&&(a=null),{items:s,activeItemIndex:a}}let R={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,__demoMode:!1,menuState:0},2:(e,t)=>{var n;let s=C(e),a=(0,p.d)(t,{resolveItems:()=>s.items,resolveActiveIndex:()=>s.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...s,searchQuery:"",activeItemIndex:a,activationTrigger:null!=(n=t.trigger)?n:1}},3:(e,t)=>{let n=""!==e.searchQuery?0:1,s=e.searchQuery+t.value.toLowerCase(),a=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(s))&&!e.dataRef.current.disabled})),i=a?e.items.indexOf(a):-1;return-1===i||i===e.activeItemIndex?{...e,searchQuery:s}:{...e,searchQuery:s,activeItemIndex:i,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let n=C(e,(e=>[...e,{id:t.id,dataRef:t.dataRef}]));return{...e,...n}},6:(e,t)=>{let n=C(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}}},F=(0,i.createContext)(null);function _(e){let t=(0,i.useContext)(F);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,_),t}return t}function T(e,t){return(0,r.E)(t.type,R,e,t)}F.displayName="MenuContext";let P=i.Fragment;let E=l.AN.RenderStrategy|l.AN.Static;let O=i.Fragment;let A=(0,l.yV)((function(e,t){let{__demoMode:n=!1,...s}=e,a=(0,i.useReducer)(T,{__demoMode:n,menuState:n?0:1,buttonRef:(0,i.createRef)(),itemsRef:(0,i.createRef)(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:o,itemsRef:c,buttonRef:u},m]=a,x=(0,d.T)(t);(0,v.O)([u,c],((e,t)=>{var n;m({type:1}),(0,h.sP)(t,h.tJ.Loose)||(e.preventDefault(),null==(n=u.current)||n.focus())}),0===o);let p=(0,N.z)((()=>{m({type:1})})),f=(0,i.useMemo)((()=>({open:0===o,close:p})),[o,p]),g={ref:x};return i.createElement(F.Provider,{value:a},i.createElement(y.up,{value:(0,r.E)(o,{0:y.ZM.Open,1:y.ZM.Closed})},(0,l.sY)({ourProps:g,theirProps:s,slot:f,defaultTag:P,name:"Menu"})))})),D=(0,l.yV)((function(e,t){var n;let s=(0,m.M)(),{id:a=`headlessui-menu-button-${s}`,...r}=e,[o,u]=_("Menu.Button"),h=(0,d.T)(o.buttonRef,t),v=(0,c.G)(),g=(0,N.z)((e=>{switch(e.key){case x.R.Space:case x.R.Enter:case x.R.ArrowDown:e.preventDefault(),e.stopPropagation(),u({type:0}),v.nextFrame((()=>u({type:2,focus:p.T.First})));break;case x.R.ArrowUp:e.preventDefault(),e.stopPropagation(),u({type:0}),v.nextFrame((()=>u({type:2,focus:p.T.Last})))}})),y=(0,N.z)((e=>{if(e.key===x.R.Space)e.preventDefault()})),j=(0,N.z)((t=>{if((0,f.P)(t.currentTarget))return t.preventDefault();e.disabled||(0===o.menuState?(u({type:1}),v.nextFrame((()=>{var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),u({type:0})))})),w=(0,i.useMemo)((()=>({open:0===o.menuState})),[o]),k={ref:h,id:a,type:(0,b.f)(e,o.buttonRef),"aria-haspopup":"menu","aria-controls":null==(n=o.itemsRef.current)?void 0:n.id,"aria-expanded":0===o.menuState,onKeyDown:g,onKeyUp:y,onClick:j};return(0,l.sY)({ourProps:k,theirProps:r,slot:w,defaultTag:"button",name:"Menu.Button"})})),M=(0,l.yV)((function(e,t){var n,s;let a=(0,m.M)(),{id:r=`headlessui-menu-items-${a}`,...u}=e,[f,v]=_("Menu.Items"),b=(0,d.T)(f.itemsRef,t),w=(0,j.i)(f.itemsRef),k=(0,c.G)(),I=(0,y.oJ)(),Z=null!==I?(I&y.ZM.Open)===y.ZM.Open:0===f.menuState;(0,i.useEffect)((()=>{let e=f.itemsRef.current;e&&0===f.menuState&&e!==(null==w?void 0:w.activeElement)&&e.focus({preventScroll:!0})}),[f.menuState,f.itemsRef,w]),(0,g.B)({container:f.itemsRef.current,enabled:0===f.menuState,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let S=(0,N.z)((e=>{var t,n;switch(k.dispose(),e.key){case x.R.Space:if(""!==f.searchQuery)return e.preventDefault(),e.stopPropagation(),v({type:3,value:e.key});case x.R.Enter:if(e.preventDefault(),e.stopPropagation(),v({type:1}),null!==f.activeItemIndex){let{dataRef:e}=f.items[f.activeItemIndex];null==(n=null==(t=e.current)?void 0:t.domRef.current)||n.click()}(0,h.wI)(f.buttonRef.current);break;case x.R.ArrowDown:return e.preventDefault(),e.stopPropagation(),v({type:2,focus:p.T.Next});case x.R.ArrowUp:return e.preventDefault(),e.stopPropagation(),v({type:2,focus:p.T.Previous});case x.R.Home:case x.R.PageUp:return e.preventDefault(),e.stopPropagation(),v({type:2,focus:p.T.First});case x.R.End:case x.R.PageDown:return e.preventDefault(),e.stopPropagation(),v({type:2,focus:p.T.Last});case x.R.Escape:e.preventDefault(),e.stopPropagation(),v({type:1}),(0,o.k)().nextFrame((()=>{var e;return null==(e=f.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case x.R.Tab:e.preventDefault(),e.stopPropagation(),v({type:1}),(0,o.k)().nextFrame((()=>{(0,h.EO)(f.buttonRef.current,e.shiftKey?h.TO.Previous:h.TO.Next)}));break;default:1===e.key.length&&(v({type:3,value:e.key}),k.setTimeout((()=>v({type:4})),350))}})),C=(0,N.z)((e=>{if(e.key===x.R.Space)e.preventDefault()})),R=(0,i.useMemo)((()=>({open:0===f.menuState})),[f]),F={"aria-activedescendant":null===f.activeItemIndex||null==(n=f.items[f.activeItemIndex])?void 0:n.id,"aria-labelledby":null==(s=f.buttonRef.current)?void 0:s.id,id:r,onKeyDown:S,onKeyUp:C,role:"menu",tabIndex:0,ref:b};return(0,l.sY)({ourProps:F,theirProps:u,slot:R,defaultTag:"div",features:E,visible:Z,name:"Menu.Items"})})),L=(0,l.yV)((function(e,t){let n=(0,m.M)(),{id:s=`headlessui-menu-item-${n}`,disabled:a=!1,...r}=e,[c,x]=_("Menu.Item"),f=null!==c.activeItemIndex&&c.items[c.activeItemIndex].id===s,v=(0,i.useRef)(null),g=(0,d.T)(t,v);(0,u.e)((()=>{if(c.__demoMode||0!==c.menuState||!f||0===c.activationTrigger)return;let e=(0,o.k)();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=v.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[c.__demoMode,v,f,c.menuState,c.activationTrigger,c.activeItemIndex]);let y=(0,k.x)(v),b=(0,i.useRef)({disabled:a,domRef:v,get textValue(){return y()}});(0,u.e)((()=>{b.current.disabled=a}),[b,a]),(0,u.e)((()=>(x({type:5,id:s,dataRef:b}),()=>x({type:6,id:s}))),[b,s]);let j=(0,N.z)((()=>{x({type:1})})),I=(0,N.z)((e=>{if(a)return e.preventDefault();x({type:1}),(0,h.wI)(c.buttonRef.current)})),Z=(0,N.z)((()=>{if(a)return x({type:2,focus:p.T.Nothing});x({type:2,focus:p.T.Specific,id:s})})),S=(0,w.g)(),C=(0,N.z)((e=>S.update(e))),R=(0,N.z)((e=>{S.wasMoved(e)&&(a||f||x({type:2,focus:p.T.Specific,id:s,trigger:0}))})),F=(0,N.z)((e=>{S.wasMoved(e)&&(a||f&&x({type:2,focus:p.T.Nothing}))})),T=(0,i.useMemo)((()=>({active:f,disabled:a,close:j})),[f,a,j]);return(0,l.sY)({ourProps:{id:s,ref:g,role:"menuitem",tabIndex:!0===a?void 0:-1,"aria-disabled":!0===a||void 0,disabled:void 0,onClick:I,onFocus:Z,onPointerEnter:C,onMouseEnter:C,onPointerMove:R,onMouseMove:R,onPointerLeave:F,onMouseLeave:F},theirProps:r,slot:T,defaultTag:O,name:"Menu.Item"})})),z=Object.assign(A,{Button:D,Items:M,Item:L})}},function(e){e.O(0,[6440,7333,696,9198,7204,8855,9774,2888,179],(function(){return t=56340,e(e.s=t);var t}));var t=e.O();_N_E=t}]);