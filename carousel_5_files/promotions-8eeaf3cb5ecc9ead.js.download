(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8760],{97281:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/marketing/promotions",function(){return n(13581)}])},74007:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var a=n(26042),s=n(69396),i=n(85893),r=n(67294),o=n(46440),l=n(72510),c=n(2740),d=n(11355),u=n(33303),m=n(30112),p=n(69737),f=n(66605);function x(e){var t=e.className,n=e.icon,x=e.iconClassName,h=e.button,v=e.buttonClassName,g=e.openClassName,y=e.iconOpenClassName,b=e.children,j=e.inline,w=e.itemsContainerClass,N=e.mobileContent,k=e.tooltip,I=e.disabled,R=e.placementAlign,T=void 0===R?"end":R,C=e.backdrop,S=void 0!==C&&C,_=e.onOpen,F=(0,u.ac)("(min-width: 1024px)"),P=(0,r.useState)(null),Z=P[0],A=P[1],E=(0,r.useState)(null),M=E[0],D=E[1],z=(0,r.useRef)(null),O=(0,o.D)(Z,M,{placement:"bottom-".concat(T),modifiers:[{name:"flip",options:{allowedAutoPlacements:["top-start","bottom-start","top-end","bottom-end"]}},{name:"offset",options:{offset:[0,8]}}]}),K=O.styles,V=O.attributes,B=function(e){return(0,i.jsx)(l.v.Button,{ref:A,className:(0,u.AK)(v,e?g:"","cursor-pointer z-5"),disabled:I,onClick:function(e){return e.stopPropagation()},children:h||(0,i.jsx)(m.Z,{icon:n||"DotsVerticalIcon",className:(0,u.AK)(x,"h-5 w-5",e?y||"text-indigo-500":!x&&"text-gray-500")})})};return(0,i.jsx)(l.v,{as:"div",className:(0,u.AK)("relative inline-block text-left",t),onClick:function(e){return e.stopPropagation()},children:function(e){var t=e.open;return"function"===typeof _&&_(t),(0,i.jsxs)(i.Fragment,{children:[k?(0,i.jsx)(f.Z,{alt:k,disabled:I,children:B(t)}):B(t),(0,i.jsxs)(c.h,{children:[t&&S&&(0,i.jsx)("div",{className:"fixed inset-0"}),F?(0,i.jsx)("div",(0,s.Z)((0,a.Z)({className:"z-100",ref:z,style:K.popper},V.popper),{children:(0,i.jsx)(d.u,{show:t,as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",beforeEnter:function(){return D(z.current)},afterLeave:function(){return D(null)},children:(0,i.jsx)(l.v.Items,{className:(0,u.AK)(j?"static":"absolute","origin-top-right z-10 right-0 mt-1 w-full min-w-50 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none overflow-hidden",w),children:b})})})):(0,i.jsx)(d.u.Root,{show:t,as:r.Fragment,children:(0,i.jsx)(p.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",onClose:function(){return!1},children:(0,i.jsxs)("div",{className:"flex items-end justify-center h-full text-center",children:[(0,i.jsx)(d.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,i.jsx)(d.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:(0,i.jsxs)("div",{className:(0,u.AK)("w-full bg-white pt-2 text-left overflow-hidden shadow-xl transform transition-all",N?"flex flex-col h-full":"block rounded-t-lg"),children:[N&&(0,i.jsx)("div",{className:"flex-1 flex justify-center items-center p-10",children:N}),(0,i.jsx)("div",{className:(0,u.AK)("flex flex-col overflow-hidden",w),children:(0,i.jsx)(l.v.Items,{children:b})}),(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)("button",{className:"light lg w-full",children:"Close"})})]})})]})})})]})]})}})}},13581:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var a=n(47568),s=n(26042),i=n(69396),r=n(10253),o=n(29815),l=n(70655),c=n(85893),d=n(67294),u=n(86067),m=n(65082),p=n(33303),f=n(16494),x=n(30112),h=n(80360),v=n(25675),g=n.n(v),y=n(41664),b=n.n(y),j=n(74007),w=n(72510),N=n(11355),k=n(69737);function I(e){var t=e.open,n=e.setOpen,a=e.onSelect;return(0,c.jsx)(N.u.Root,{show:t,as:d.Fragment,children:(0,c.jsx)(k.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",onClose:function(){return n(!1)},children:(0,c.jsxs)("div",{className:"flex items-end justify-center min-h-screen text-center md:block",children:[(0,c.jsx)(N.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,c.jsx)(k.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,c.jsx)("span",{className:"hidden md:inline-block md:align-middle md:h-screen","aria-hidden":"true",children:"\u200b"}),(0,c.jsx)(N.u.Child,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,c.jsxs)("div",{className:"inline-block align-middle bg-white rounded-lg my-8 max-w-140 w-full text-left overflow-visible shadow-xl transform transition-all",children:[(0,c.jsxs)("div",{className:"flex items-center p-4 lg:p-6 border-b border-gray-200",children:[(0,c.jsx)(k.V.Title,{className:"font-bold text-gray-900",children:"Create promotion"}),(0,c.jsx)("button",{type:"button",className:"bg-white rounded-md text-gray-600 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ml-auto",onClick:function(){return n(!1)},children:(0,c.jsx)(x.Z,{icon:"XIcon",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 lg:p-6",children:[{id:"google-ad",name:"Google Ad",icon:"google",description:"A short text ad on Google when someone searches for a related keyword."},{id:"facebook-post",name:"Facebook Post",icon:"facebook",description:"A post that include text and an image that can be shared to your Facebook feed."},{id:"twitter-post",name:"Tweet",icon:"twitter",description:"A tweet is a short public message that is posted on Twitter."},{id:"email",name:"Email",icon:"email",description:"Send an email to people in your network to promote your business."}].map((function(e){return(0,c.jsxs)("div",{className:"flex flex-col gap-4 p-6 rounded-lg shadow-md",children:[(0,c.jsx)("div",{className:"flex-shrink-0 relative w-12 h-12",children:(0,c.jsx)(g(),{unoptimized:!0,className:"rounded",src:(0,p.sd)("promotion/".concat(e.icon,".svg")),objectFit:"contain",layout:"fill",alt:e.name})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("p",{className:"font-medium mb-1",children:e.name}),(0,c.jsx)("p",{className:"text-sm text-gray-700",children:e.description})]}),(0,c.jsx)("button",{className:"primary",onClick:function(){return a(e.id)},children:"Create"})]},e.id)}))})]})})]})})})}var R=n(11163),T=n(60728),C=n(53371),S=n(33299),_=n(52077),F=[{id:null,name:"All"},{id:"google-ad",name:"Google Ad"},{id:"facebook-post",name:"Facebook post"},{id:"twitter-post",name:"Tweet"},{id:"email",name:"Email"}];function P(){var e,t,n,v,y,N=(0,r.Z)((0,u.Z)("layout.title","Marketing",!0),2),k=(N[0],N[1],(0,d.useState)((0,p.tl)("website"))),P=k[0],Z=k[1],A=(0,d.useState)(!1),E=A[0],M=A[1],D=(0,d.useState)((0,p.tl)("marketing.promotions")),z=D[0],O=D[1],K=(0,d.useState)(1),V=K[0],B=K[1],Q=(0,d.useState)(""),L=Q[0],G=Q[1],U=(0,d.useState)(null),X=U[0],q=U[1],Y=(0,d.useState)(!1),$=Y[0],J=Y[1],H=(0,d.useState)(!1),W=H[0],ee=H[1],te=(0,d.useState)(-1),ne=te[0],ae=te[1],se=(0,d.useState)(!1),ie=se[0],re=se[1],oe=(0,R.useRouter)(),le=(0,S.useSession)().data,ce=(0,m.Z)(),de=ce.get,ue=ce.post,me=ce.remove,pe=(0,T.Z)(),fe=pe.confirm,xe=pe.ConfirmDialog,he=(0,d.useRef)(null),ve=(0,d.useRef)(null),ge=function(){var e=(0,a.Z)((function(){var e,t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return M(!0),[4,de("/website/get",{populate:!0})];case 1:return(e=n.sent())&&!0===e.status&&e.content&&(t=(0,i.Z)((0,s.Z)({},e.content),{subdomain:(0,p.nv)(e.content.subdomain)}),(0,p.Fs)("website",t),Z(t)),M(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ye=function(e){return"google-ad"===e?"Google ad":"twitter-post"===e?"Tweet":"facebook-post"===e?"Facebook post":"email"===e?"Email":void 0},be=function(e){return"google-ad"===e?"google":"twitter-post"===e?"twitter":"facebook-post"===e?"facebook":"email"===e?"email":void 0},je=function(){var e=(0,a.Z)((function(){var e,t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return M(!0),[4,de("/marketing/get-promotions",{page:V,perPage:15,query:L,type:X}).catch(console.log)];case 1:return(e=n.sent())&&!0===e.status&&e.content&&(t=1===V?e.content:(0,i.Z)((0,s.Z)({},e.content),{promotions:(0,o.Z)(z.promotions).concat((0,o.Z)(e.content.promotions))}),(0,p.Fs)("marketing.promotions",t),O(t)),M(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=(0,a.Z)((function(e){var t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return M(!0),delete e._id,[4,ue("/marketing/create-promotion",e).catch(console.log)];case 1:return(t=n.sent())&&!0===t.status&&t.content?(p.Z9.success("Promotion duplicated!"),[4,oe.push("/marketing/promotions/".concat(t.content._id))]):[3,3];case 2:return n.sent(),Ne(),[3,4];case 3:p.Z9.error("Error saving this item, please try again."),M(!1),n.label=4;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,a.Z)((function(){var e;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,de("/marketing/count-promotions")];case 1:return(e=t.sent())&&!0===e.status&&e.content?ae(e.content||0):ae(0),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){var e,t,n;("create"===(null===oe||void 0===oe||null===(e=oe.query)||void 0===e?void 0:e.open)&&(ee(!0),oe.push("/marketing/promotions",void 0,{shallow:!0})),"search"===(null===oe||void 0===oe||null===(t=oe.query)||void 0===t?void 0:t.focus)&&(null===z||void 0===z?void 0:z.exists)&&ne>=0)&&(null===(n=he.current)||void 0===n||n.focus(),J(!0),oe.push("/marketing/promotions",void 0,{shallow:!0}))}),[oe,z,ne]),(0,d.useEffect)((function(){return clearTimeout(ve.current),ve.current=setTimeout((function(){je()}),L?400:10),function(){clearTimeout(ve.current)}}),[L,X,V]),(0,d.useEffect)((function(){ge(),Ne()}),[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(C.Z,{context:"promotions",open:ie,setOpen:re}),!z||ne<0?(0,c.jsxs)("div",{className:"flex flex-wrap gap-5",children:[(0,c.jsx)(f.Z,{variant:"card",className:"!my-0"}),(0,c.jsx)(f.Z,{variant:"card",className:"!my-0"}),(0,c.jsx)(f.Z,{variant:"card",className:"!my-0"}),(0,c.jsx)(f.Z,{variant:"card",className:"!my-0"})]}):"",z&&!z.exists&&ne>=0&&(0,c.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,c.jsx)("div",{className:"max-w-xl mb-6",children:(0,c.jsx)("p",{className:"text-h3 lg:text-h1 font-extrabold text-gray-900",children:"Increase brand awareness and reach potential customers"})}),(0,c.jsx)("div",{className:"flex items-center flex-wrap gap-4 mb-10",children:(0,c.jsx)("button",{className:"primary",onClick:function(){return ee(!0)},disabled:E,children:"Create promotion"})}),(0,c.jsx)("div",{className:"flex items-center justify-center w-full h-[215px] sm:h-[380px] md:h-[420px] lg:h-[480px] rounded-lg shadow-lg bg-black overflow-hidden",children:(0,c.jsx)("iframe",{src:"https://www.loom.com/embed/76e89efcc8db42b988ed596b32463ece",width:"100%",height:"100%",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})})]}),z&&z.exists&&ne>=0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-4 lg:mb-6",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[(0,c.jsxs)("div",{className:(0,p.AK)("items-center gap-3 w-full",$?"flex mb-[1px]":"hidden md:flex"),children:[(0,c.jsxs)("div",{className:"flex-1 relative",children:[(0,c.jsx)("span",{className:"absolute top-1/2 z-10 pl-2.5 -translate-y-1/2",children:(0,c.jsx)(x.Z,{icon:"SearchIcon",className:"w-5 h-5"})}),(0,c.jsx)("input",{className:"flex-1 w-full md:w-auto md:min-w-80 input !pl-9",value:L,onChange:function(e){G(e.currentTarget.value),B(1)},placeholder:"Search",ref:he})]}),(0,c.jsx)("div",{className:"flex-shrink-0 md:hidden",children:(0,c.jsx)("button",{className:"round secondary",onClick:function(){return J(!1)},children:(0,c.jsx)(x.Z,{icon:"XIcon",className:"w-4 h-4 text-gray-700"})})})]}),(0,c.jsx)("div",{className:(0,p.AK)($?"hidden":"md:hidden"),children:(0,c.jsx)("button",{className:"round light",onClick:function(){return J(!0)},children:(0,c.jsx)(x.Z,{icon:"SearchIcon",className:"w-5 h-5"})})}),(0,c.jsx)(h.Z,{className:(0,p.AK)("md:min-w-80 w-full",$?"hidden md:block":""),placeholder:"All",values:F,value:X&&(null===F||void 0===F?void 0:F.find((function(e){return e.id===X}))),onChange:function(e){q(e.id),B(1)}})]}),ne>=((null===le||void 0===le||null===(e=le.user)||void 0===e||null===(t=e.plan)||void 0===t||null===(n=t.limits)||void 0===n?void 0:n.promotions)||Number.MAX_SAFE_INTEGER)?(0,c.jsxs)("button",{className:(0,p.AK)("primary flex-shrink-0",$?"!hidden md:!flex":""),onClick:function(){return re(!0)},children:[(0,c.jsx)("span",{className:"hidden md:inline-block",children:"Create promotion"}),(0,c.jsx)("span",{className:"md:hidden",children:"Create"})]}):(0,c.jsxs)("button",{className:(0,p.AK)("primary flex-shrink-0",$?"!hidden md:!flex":""),onClick:function(){return ee(!0)},disabled:E,children:[(0,c.jsx)("span",{className:"hidden md:inline-block",children:"Create promotion"}),(0,c.jsx)("span",{className:"md:hidden",children:"Create"})]})]}),(null===z||void 0===z||null===(v=z.promotions)||void 0===v?void 0:v.length)>0?(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:null===(y=z.promotions)||void 0===y?void 0:y.map((function(e){var t,n,s,i,r,o,d,u;return(0,c.jsxs)("div",{className:(0,p.AK)("flex flex-col gap-4 w-full bg-white shadow p-4 md:p-6 rounded-lg",E&&"pointer-events-none opacity-60"),children:[(0,c.jsxs)("div",{className:"flex flex-col gap-4 cursor-pointer",onClick:function(){return oe.push("/marketing/promotions/".concat(e._id))},children:[(0,c.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,c.jsx)("p",{className:"text-h5 text-gray-700 font-bold",children:ye(e.type)}),(0,c.jsx)("div",{className:"w-6 h-6 relative flex-none",children:(0,c.jsx)(g(),{unoptimized:!0,src:(0,p.sd)("promotion/".concat(be(e.type),".svg")),layout:"fill",alt:ye(e.type)})})]}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Nov 3, 2022"})]}),(0,c.jsx)("div",{className:"flex-1 flex items-center justify-center bg-gray-100 rounded-lg p-4 min-h-60 max-h-60 overflow-hidden cursor-pointer",onClick:function(){return oe.push("/marketing/promotions/".concat(e._id))},children:"google-ad"===e.type&&(0,c.jsxs)("div",{className:"p-6 w-full max-w-110 bg-white",children:[(0,c.jsxs)("div",{className:"text-sm mb-2",children:[(0,c.jsx)("span",{className:"font-semibold",children:"Ad"})," \xb7 ",(null===P||void 0===P?void 0:P.domain)||(null===P||void 0===P?void 0:P.subdomain)+(0,p.lz)()]}),(0,c.jsxs)("div",{className:"text-indigo-600 font-semibold mb-2",children:[e.headline," | ",e.headline2," | ",e.headline3]}),(0,c.jsxs)("div",{className:"text-sm mb-2",children:[e.content," ",e.content2]})]})||"facebook-post"===e.type&&(0,c.jsxs)("div",{className:"w-full max-w-160 bg-white",style:{zoom:.5},children:[(0,c.jsxs)("div",{className:"flex flex-col gap-2 px-3 py-4",children:[(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-500 rounded-full",children:(0,c.jsx)("div",{className:"text-white text-h5 font-medium uppercase",children:(0,p.Qm)(null===P||void 0===P||null===(t=P.Business)||void 0===t?void 0:t.name)})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm",children:null===P||void 0===P||null===(n=P.Business)||void 0===n?void 0:n.name}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"1 d"})]})]}),(0,c.jsx)("div",{className:"text-sm",children:e.content})]}),(0,c.jsx)("div",{className:"relative h-80 bg-gray-200 overflow-hidden",children:e.media&&(0,c.jsx)(g(),{unoptimized:!0,src:null===(s=e.media)||void 0===s?void 0:s.url,alt:null===(i=e.media)||void 0===i?void 0:i.author,layout:"fill",objectFit:"cover",className:"w-full h-full object-center object-cover"})})]})||"twitter-post"===e.type&&(0,c.jsxs)("div",{className:"flex gap-3 w-full max-w-140 px-3 py-4 bg-white",children:[(0,c.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-gray-500 rounded-full flex-shrink-0",children:(0,c.jsx)("div",{className:"text-white text-h4 font-medium uppercase",children:(0,p.Qm)(null===P||void 0===P||null===(r=P.Business)||void 0===r?void 0:r.name)})}),(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsxs)("div",{className:"flex gap-1",children:[(0,c.jsx)("p",{className:"text-sm font-bold",children:null===P||void 0===P||null===(o=P.Business)||void 0===o?void 0:o.name}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"@_____ \xb7 1 d"})]}),(0,c.jsx)("div",{className:"text-sm",children:e.content})]})]})||"email"===e.type&&(0,c.jsxs)("div",{className:"w-full max-w-160 bg-white",style:{zoom:.5},children:[(0,c.jsxs)("div",{className:"flex items-center justify-between gap-3 p-6 border-b border-gray-200",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("div",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-gray-500 overflow-hidden",children:(0,c.jsx)("div",{className:"text-white text-sm font-medium uppercase",children:(0,p.Qm)(null===P||void 0===P||null===(d=P.Business)||void 0===d?void 0:d.name)})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm font-semibold truncate",children:null===P||void 0===P||null===(u=P.Business)||void 0===u?void 0:u.name}),(0,c.jsxs)("p",{className:"text-sm font-medium text-gray-600 truncate",children:["email@",null===P||void 0===P?void 0:P.subdomain,".com"]})]})]}),(0,c.jsx)("div",{className:"text-sm text-gray-600 whitespace-nowrap",children:"Today at 10:15 am"})]}),(0,c.jsxs)("div",{className:"py-4 px-6",children:[(0,c.jsx)("h5",{className:"text-h5 mb-6",children:e.headline}),(0,c.jsx)("pre",{children:e.content})]})]})}),(0,c.jsxs)("div",{className:"divide-y divide-gray-200",children:[(0,c.jsx)(b(),{href:"/marketing/promotions/".concat(e._id),children:(0,c.jsxs)("a",{className:"link flex items-center gap-2 py-2.5 text-indigo-700 cursor-pointer",children:[(0,c.jsx)(x.Z,{icon:"EyeIcon",className:"w-4 h-4","aria-hidden":"true"}),(0,c.jsx)("span",{className:"text-sm",children:"View"})]})}),(0,c.jsxs)(j.Z,{inline:!0,className:"!w-full",buttonClassName:"link w-full flex items-center py-2.5 text-indigo-700",placementAlign:"start",button:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x.Z,{icon:"DotsVerticalIcon",className:"w-4 h-4 mr-2","aria-hidden":"true"}),(0,c.jsx)("span",{className:"text-sm",children:"More"})]}),children:[(0,c.jsx)(w.v.Item,{as:"div",children:(0,c.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2.5 hover:bg-gray-100 text-gray-700 cursor-pointer",onClick:function(t){t.stopPropagation(),we(e)},children:[(0,c.jsx)(x.Z,{icon:"DuplicateIcon",className:"w-4 h-4 text-gray-700","aria-hidden":"true"}),(0,c.jsx)("span",{className:"text-sm font-medium",children:"Duplicate"})]})}),(0,c.jsx)(w.v.Item,{as:"div",children:(0,c.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2.5 hover:bg-red-100 text-red-700 cursor-pointer",onClick:function(t){var n;t.stopPropagation(),fe("Delete promotion?","Are you sure you want to delete this ".concat(ye((n=e).type),"?"),(0,a.Z)((function(){var e;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return M(!0),[4,me("/marketing/delete-promotion",{idPromotion:n._id}).catch(console.log)];case 1:return(e=t.sent())&&!0===e.status?(p.Z9.success("Promotion deleted!"),je(),Ne()):(p.Z9.error(e.error),M(!1)),[2]}}))})))},children:[(0,c.jsx)(x.Z,{icon:"TrashIcon",className:"w-4 h-4 text-red-700","aria-hidden":"true"}),(0,c.jsx)("span",{className:"text-sm font-medium",children:"Delete"})]})})]})]})]},e._id)}))}):(0,c.jsx)("div",{className:"py-6 px-4 bg-white",children:(0,c.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg text-sm text-gray-500",children:"No promotion found"})}),(null===z||void 0===z?void 0:z.total)>15*V&&(0,c.jsx)(_.Z,{className:"primary !flex mx-auto",onClick:function(){return B(V+1)},loading:E,children:"Load more"})]}),(0,c.jsx)(I,{open:W,setOpen:ee,onSelect:function(e){return oe.push("/marketing/promotions/create?type=".concat(e))}}),(0,c.jsx)(xe,{attention:!0})]})}P.auth=!0},72510:function(e,t,n){"use strict";n.d(t,{v:function(){return K}});var a,s,i=n(67294),r=n(32984),o=n(12351),l=n(9362),c=n(94192),d=n(16723),u=n(23784),m=n(19946),p=n(61363),f=n(11497),x=n(64103),h=n(84575),v=n(39650),g=n(31591),y=n(16567),b=n(14157),j=n(51074),w=n(73781),N=n(40476),k=n(55918),I=((s=I||{})[s.Open=0]="Open",s[s.Closed=1]="Closed",s),R=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(R||{}),T=((a=T||{})[a.OpenMenu=0]="OpenMenu",a[a.CloseMenu=1]="CloseMenu",a[a.GoToItem=2]="GoToItem",a[a.Search=3]="Search",a[a.ClearSearch=4]="ClearSearch",a[a.RegisterItem=5]="RegisterItem",a[a.UnregisterItem=6]="UnregisterItem",a);function C(e,t=(e=>e)){let n=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,a=(0,h.z2)(t(e.items.slice()),(e=>e.dataRef.current.domRef.current)),s=n?a.indexOf(n):null;return-1===s&&(s=null),{items:a,activeItemIndex:s}}let S={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,__demoMode:!1,menuState:0},2:(e,t)=>{var n;let a=C(e),s=(0,f.d)(t,{resolveItems:()=>a.items,resolveActiveIndex:()=>a.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...a,searchQuery:"",activeItemIndex:s,activationTrigger:null!=(n=t.trigger)?n:1}},3:(e,t)=>{let n=""!==e.searchQuery?0:1,a=e.searchQuery+t.value.toLowerCase(),s=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(a))&&!e.dataRef.current.disabled})),i=s?e.items.indexOf(s):-1;return-1===i||i===e.activeItemIndex?{...e,searchQuery:a}:{...e,searchQuery:a,activeItemIndex:i,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let n=C(e,(e=>[...e,{id:t.id,dataRef:t.dataRef}]));return{...e,...n}},6:(e,t)=>{let n=C(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}}},_=(0,i.createContext)(null);function F(e){let t=(0,i.useContext)(_);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,F),t}return t}function P(e,t){return(0,r.E)(t.type,S,e,t)}_.displayName="MenuContext";let Z=i.Fragment;let A=o.AN.RenderStrategy|o.AN.Static;let E=i.Fragment;let M=(0,o.yV)((function(e,t){let{__demoMode:n=!1,...a}=e,s=(0,i.useReducer)(P,{__demoMode:n,menuState:n?0:1,buttonRef:(0,i.createRef)(),itemsRef:(0,i.createRef)(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsRef:c,buttonRef:d},m]=s,p=(0,u.T)(t);(0,v.O)([d,c],((e,t)=>{var n;m({type:1}),(0,h.sP)(t,h.tJ.Loose)||(e.preventDefault(),null==(n=d.current)||n.focus())}),0===l);let f=(0,w.z)((()=>{m({type:1})})),x=(0,i.useMemo)((()=>({open:0===l,close:f})),[l,f]),g={ref:p};return i.createElement(_.Provider,{value:s},i.createElement(y.up,{value:(0,r.E)(l,{0:y.ZM.Open,1:y.ZM.Closed})},(0,o.sY)({ourProps:g,theirProps:a,slot:x,defaultTag:Z,name:"Menu"})))})),D=(0,o.yV)((function(e,t){var n;let a=(0,m.M)(),{id:s=`headlessui-menu-button-${a}`,...r}=e,[l,d]=F("Menu.Button"),h=(0,u.T)(l.buttonRef,t),v=(0,c.G)(),g=(0,w.z)((e=>{switch(e.key){case p.R.Space:case p.R.Enter:case p.R.ArrowDown:e.preventDefault(),e.stopPropagation(),d({type:0}),v.nextFrame((()=>d({type:2,focus:f.T.First})));break;case p.R.ArrowUp:e.preventDefault(),e.stopPropagation(),d({type:0}),v.nextFrame((()=>d({type:2,focus:f.T.Last})))}})),y=(0,w.z)((e=>{if(e.key===p.R.Space)e.preventDefault()})),j=(0,w.z)((t=>{if((0,x.P)(t.currentTarget))return t.preventDefault();e.disabled||(0===l.menuState?(d({type:1}),v.nextFrame((()=>{var e;return null==(e=l.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),d({type:0})))})),N=(0,i.useMemo)((()=>({open:0===l.menuState})),[l]),k={ref:h,id:s,type:(0,b.f)(e,l.buttonRef),"aria-haspopup":"menu","aria-controls":null==(n=l.itemsRef.current)?void 0:n.id,"aria-expanded":0===l.menuState,onKeyDown:g,onKeyUp:y,onClick:j};return(0,o.sY)({ourProps:k,theirProps:r,slot:N,defaultTag:"button",name:"Menu.Button"})})),z=(0,o.yV)((function(e,t){var n,a;let s=(0,m.M)(),{id:r=`headlessui-menu-items-${s}`,...d}=e,[x,v]=F("Menu.Items"),b=(0,u.T)(x.itemsRef,t),N=(0,j.i)(x.itemsRef),k=(0,c.G)(),I=(0,y.oJ)(),R=null!==I?(I&y.ZM.Open)===y.ZM.Open:0===x.menuState;(0,i.useEffect)((()=>{let e=x.itemsRef.current;e&&0===x.menuState&&e!==(null==N?void 0:N.activeElement)&&e.focus({preventScroll:!0})}),[x.menuState,x.itemsRef,N]),(0,g.B)({container:x.itemsRef.current,enabled:0===x.menuState,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let T=(0,w.z)((e=>{var t,n;switch(k.dispose(),e.key){case p.R.Space:if(""!==x.searchQuery)return e.preventDefault(),e.stopPropagation(),v({type:3,value:e.key});case p.R.Enter:if(e.preventDefault(),e.stopPropagation(),v({type:1}),null!==x.activeItemIndex){let{dataRef:e}=x.items[x.activeItemIndex];null==(n=null==(t=e.current)?void 0:t.domRef.current)||n.click()}(0,h.wI)(x.buttonRef.current);break;case p.R.ArrowDown:return e.preventDefault(),e.stopPropagation(),v({type:2,focus:f.T.Next});case p.R.ArrowUp:return e.preventDefault(),e.stopPropagation(),v({type:2,focus:f.T.Previous});case p.R.Home:case p.R.PageUp:return e.preventDefault(),e.stopPropagation(),v({type:2,focus:f.T.First});case p.R.End:case p.R.PageDown:return e.preventDefault(),e.stopPropagation(),v({type:2,focus:f.T.Last});case p.R.Escape:e.preventDefault(),e.stopPropagation(),v({type:1}),(0,l.k)().nextFrame((()=>{var e;return null==(e=x.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case p.R.Tab:e.preventDefault(),e.stopPropagation(),v({type:1}),(0,l.k)().nextFrame((()=>{(0,h.EO)(x.buttonRef.current,e.shiftKey?h.TO.Previous:h.TO.Next)}));break;default:1===e.key.length&&(v({type:3,value:e.key}),k.setTimeout((()=>v({type:4})),350))}})),C=(0,w.z)((e=>{if(e.key===p.R.Space)e.preventDefault()})),S=(0,i.useMemo)((()=>({open:0===x.menuState})),[x]),_={"aria-activedescendant":null===x.activeItemIndex||null==(n=x.items[x.activeItemIndex])?void 0:n.id,"aria-labelledby":null==(a=x.buttonRef.current)?void 0:a.id,id:r,onKeyDown:T,onKeyUp:C,role:"menu",tabIndex:0,ref:b};return(0,o.sY)({ourProps:_,theirProps:d,slot:S,defaultTag:"div",features:A,visible:R,name:"Menu.Items"})})),O=(0,o.yV)((function(e,t){let n=(0,m.M)(),{id:a=`headlessui-menu-item-${n}`,disabled:s=!1,...r}=e,[c,p]=F("Menu.Item"),x=null!==c.activeItemIndex&&c.items[c.activeItemIndex].id===a,v=(0,i.useRef)(null),g=(0,u.T)(t,v);(0,d.e)((()=>{if(c.__demoMode||0!==c.menuState||!x||0===c.activationTrigger)return;let e=(0,l.k)();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=v.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[c.__demoMode,v,x,c.menuState,c.activationTrigger,c.activeItemIndex]);let y=(0,k.x)(v),b=(0,i.useRef)({disabled:s,domRef:v,get textValue(){return y()}});(0,d.e)((()=>{b.current.disabled=s}),[b,s]),(0,d.e)((()=>(p({type:5,id:a,dataRef:b}),()=>p({type:6,id:a}))),[b,a]);let j=(0,w.z)((()=>{p({type:1})})),I=(0,w.z)((e=>{if(s)return e.preventDefault();p({type:1}),(0,h.wI)(c.buttonRef.current)})),R=(0,w.z)((()=>{if(s)return p({type:2,focus:f.T.Nothing});p({type:2,focus:f.T.Specific,id:a})})),T=(0,N.g)(),C=(0,w.z)((e=>T.update(e))),S=(0,w.z)((e=>{T.wasMoved(e)&&(s||x||p({type:2,focus:f.T.Specific,id:a,trigger:0}))})),_=(0,w.z)((e=>{T.wasMoved(e)&&(s||x&&p({type:2,focus:f.T.Nothing}))})),P=(0,i.useMemo)((()=>({active:x,disabled:s,close:j})),[x,s,j]);return(0,o.sY)({ourProps:{id:a,ref:g,role:"menuitem",tabIndex:!0===s?void 0:-1,"aria-disabled":!0===s||void 0,disabled:void 0,onClick:I,onFocus:R,onPointerEnter:C,onMouseEnter:C,onPointerMove:S,onMouseMove:S,onPointerLeave:_,onMouseLeave:_},theirProps:r,slot:P,defaultTag:E,name:"Menu.Item"})})),K=Object.assign(M,{Button:D,Items:z,Item:O})}},function(e){e.O(0,[6440,9774,2888,179],(function(){return t=97281,e(e.s=t);var t}));var t=e.O();_N_E=t}]);